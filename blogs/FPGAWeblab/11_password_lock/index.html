<!DOCTYPE html><html class=no-js lang=zh><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content=一个技术博客，分享编程和技术心得 name=description><meta content=Alivender name=author><link href=https://alivenderwww.github.io/blogs/FPGAWeblab/11_password_lock/ rel=canonical><link href=../06hdmi/ rel=prev><link href=../12_sfp/ rel=next><link href=../../../feed_rss_created.xml rel=alternate title="RSS 订阅" type=application/rss+xml><link href=../../../feed_rss_updated.xml rel=alternate title="已更新内容的 RSS 订阅" type=application/rss+xml><link href=../../../img/logo.png rel=icon><meta content="mkdocs-1.6.1, mkdocs-material-9.7.1" name=generator><title>进阶-1-密码锁实验 - Alivender's Blog</title><link href=../../../assets/stylesheets/main.484c7ddc.min.css rel=stylesheet><link href=../../../assets/stylesheets/palette.ab4e12ef.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href=../../../css/timeago.css rel=stylesheet><link href=../../../css/heti.css rel=stylesheet><link href=../../../stylesheets/font.css rel=stylesheet><link href=../../../stylesheets/extra.css rel=stylesheet><link href=../../../stylesheets/toc.css rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.7.0/style.css rel=stylesheet><link href=https://alivender-assets.oss-cn-beijing.aliyuncs.com/alivenderwww_github_io/fonts/FZLanTY/FZLanTY.font.css rel=stylesheet><link href=https://font.kivo.wiki/Blueaka/Blueaka.css rel=stylesheet><link href=https://font.kivo.wiki/Blueaka_Bold/Blueaka_Bold.css rel=stylesheet><link href=https://blog.dpp-alivender.life/stylesheets/comments_light.css rel=stylesheet><link href=https://blog.dpp-alivender.life/stylesheets/comments_dark.css rel=stylesheet><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href=../../../assets/stylesheets/glightbox.min.css rel=stylesheet><script src=../../../assets/javascripts/glightbox.min.js></script><style id=glightbox-style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body data-md-color-accent=mycolor_light data-md-color-primary=mycolor_light data-md-color-scheme=default dir=ltr> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#_1> 跳转至 </a> </div> <div data-md-component=announce> </div> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine classes --> <!-- Header --> <header class=md-header data-md-component=header> <nav aria-label=页眉 class="md-header__inner md-grid"> <!-- Link to home --> <a aria-label="Alivender's Blog" class="md-header__button md-logo" data-md-component=logo href=../../.. title="Alivender's Blog"> <img alt=logo src=../../../img/logo.png> </a> <!-- Button to open drawer --> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <!-- Header title --> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Alivender's Blog </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 进阶-1-密码锁实验 </span> </div> </div> </div> <!-- Spectrum Button and Config Menu --> <div class=md-header__option id=spectrum-button-container> <button class="md-header__button md-icon" id=spectrum-button title=启动音频频谱> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg> <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" fill=currentColor></path> </svg> </button> <!-- Config Menu --> <div id=spectrum-config-menu> <!-- FFT Size --> <div style="margin-bottom: 5px;"> <div style=display:flex;justify-content:space-between;margin-bottom:5px;> <span>FFT-Size</span> <input class=spectrum-editable-value id=fft-value type=text> </div> <input id=fft-slider max=10 min=0 style=width:100% type=range value=6> </div> <!-- Segments --> <div style="margin-bottom: 5px;"> <div style=display:flex;justify-content:space-between;margin-bottom:5px;> <span>Segments</span> <input class=spectrum-editable-value id=seg-value type=text> </div> <input id=seg-slider max=4096 min=8 step=8 style=width:100% type=range value=64> </div> <!-- Smooth Time --> <div> <div style=display:flex;justify-content:space-between;margin-bottom:5px;> <span>Smooth-Time</span> <input class=spectrum-editable-value id=smooth-value type=text> </div> <input id=smooth-slider max=1 min=0 step=0.01 style=width:100% type=range value=0.05> </div> </div> </div> <!-- Custom Color scheme toggle --> <button class="md-header__option md-icon" id=theme-toggle-btn title=切换主题色彩> <svg id=blue-theme-icon viewbox="0 0 100 100" xmlns=http://www.w3.org/2000/svg> <path d=M3.61,1.11c-.72,1.8-1.65,4.68-1.74,8.27-.19,7.57,3.46,13.41,7.12,19.25,1.45,2.32,3.66,5.53,6.83,9.08-2.49,2.77-7.54,9.14-9.62,18.85-1.84,8.56-.48,15.62.46,19.19-1.86,1.95-5.34,6.21-6.28,12.49-.39,2.62-.97,6.46,1.17,10.17,3.29,5.7,10.27,6.39,11.18,6.47-.4-1.22-.77-2.64-1.04-4.26-.29-1.73-.39-3.31-.39-4.65,1.31,1.53,3.23,3.27,6.41,5.07,4.82,2.74,8.41,3.07,23.9,3.04,16.22-.04,20.33-.38,25.36-3.38,2.78-1.65,4.95-3.13,6.16-4.5.12,1.82,0,4.15-.86,6.68-.19.56-.4,1.09-.62,1.58,1.63.17,4.44.2,7.09-1.28,5.65-3.14,6.12-10.6,6.26-12.7.59-8.93-5.3-15.3-6.62-16.65.64-3.75,1.33-10.83-.99-19.19-2.32-8.36-6.56-14.02-9.03-16.89,3.66-3.46,14.94-15.01,14.04-30.46-.15-2.62-.64-5.05-1.33-7.28-2.64.62-5.5,1.57-8.42,3-13.69,6.73-19.32,19.61-21.2,24.69-2.79-.22-5.85-.36-9.12-.34-3.23.02-6.24.19-9.01.44-2.09-5.16-8.08-17.75-21.79-24.04-2.74-1.26-5.42-2.1-7.93-2.65Z> </path> </svg> <svg id=purple-theme-icon viewbox="0 0 100 100" xmlns=http://www.w3.org/2000/svg> <path d=M19.46,0c.56,5.69.13,10.12-.37,13.12-.61,3.63-1.46,6.02-1.07,9.7.36,3.42,1.6,6.1,2.56,7.8-.54.99-1.15,2.74-2.73,3.99-1.86,1.48-3.72,3.37-6.22,5.66-4.11,3.76-6.8,9.59-8.73,11.34-1.25,1.13-2.21,2.14-2.9,2.72,1.71.59,4.65,1.36,8.33,1.07,3.55-.28,6.27-1.42,7.86-2.24-1.13,3.97-1.95,7.32-2.24,9.82-.71,6.05-.79,9.94-.47,14.39.2,2.82,1.76,5.13,2.99,6.12.21-.69.41-1.59.49-2.66.08-1.18-.01-2.2-.14-2.96.34,1.54,1.21,4.53,3.6,7.41,2.03,2.44,4.26,3.74,5.59,4.38-.15.55-.54,2.24.21,4.11.48,1.21,1.23,1.98,1.67,2.36-.99,2.64-.75,5.39.76,7.12.25.29,1.57,1.82,3.31,1.6,1.8-.23,3.05-2.22,3.24-4,.2-1.81-.68-3.63-2.23-4.7.21-.59.49-1.61.42-2.88-.08-1.57-.64-2.73-.96-3.3.63-.72,1.42-1.84,1.8-3.37.31-1.25.13-1.91.28-2.72.23-1.26,1.24-2.9,4.75-4.47,3.2.6,8.38.4,12.46.39,8.93-.02,16.5-3.23,19.96-8.23-.41,4.37-1.97,9.89-2.66,12.22.97-.34,2.12-.76,2.72-1.79-1.3,4.42-3.41,8.81-3.62,11.54,1.63-.19,4.01-.68,6.42-2.14,9.33-5.65,9.93-20.27,10.31-29.52.45-11,1.01-24.48-8.13-35.53-2.22-2.68-7.11-7.76-14.94-10.48-13.83-4.81-25.89,1.52-28.36,2.89-.21-1.99-.73-4.58-2-7.33C27.98,4.12,21.64.97,19.46,0Z> </path> </svg> </button> <!-- Color palette toggle --> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Color palette toggle --> <form class=md-header__option data-md-component=palette> <input aria-label=切换到深色模式 class=md-option data-md-color-accent=mycolor_light data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary=mycolor_light data-md-color-scheme=default id=__palette_0 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_1 hidden title=切换到深色模式> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> <input aria-label=切换到浅色模式 class=md-option data-md-color-accent=mycolor_dark data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary=mycolor_dark data-md-color-scheme=slate id=__palette_1 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_0 hidden title=切换到浅色模式> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> </form> <!-- User preference: color palette --> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- User preference: color palette --> <script>
  var palette = __md_get("__palette")
  if (palette && palette.color) {

    /* Retrieve color palette for system preference */
    if (palette.color.media === "(prefers-color-scheme)") {
      var media = matchMedia("(prefers-color-scheme: light)")
      var input = document.querySelector(media.matches
        ? "[data-md-color-media='(prefers-color-scheme: light)']"
        : "[data-md-color-media='(prefers-color-scheme: dark)']"
      )

      /* Retrieve colors for system preference */
      palette.color.media   = input.getAttribute("data-md-color-media"),
      palette.color.scheme  = input.getAttribute("data-md-color-scheme"),
      palette.color.primary = input.getAttribute("data-md-color-primary"),
      palette.color.accent  = input.getAttribute("data-md-color-accent")
    }

    /* Set color palette */
    for (var [key, value] of Object.entries(palette.color))
      document.body.setAttribute("data-md-color-" + key, value)
  }
</script> <!-- Site language selector --> <!-- Button to open search modal --> <!-- Check if search is actually enabled - see https://t.ly/DT_0V --> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <!-- Search interface --> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=搜索 autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=搜索 required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav aria-label=查找 class=md-search__options> <a aria-label=分享 class="md-search__icon md-icon" data-clipboard data-clipboard-text data-md-component=search-share href=javascript:void(0) tabindex=-1 title=分享> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg> </a> <button aria-label=清空当前内容 class="md-search__icon md-icon" tabindex=-1 title=清空当前内容 type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix tabindex=0> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <!-- Repository information --> <div class=md-header__source> <a class=md-source data-md-component=source href=https://github.com/Alivenderwww/Alivenderwww.github.io/ title=前往仓库> <div class="md-source__icon md-icon"> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> <!-- Navigation tabs (sticky) --> <!-- Custom styles for color scheme toggle --> <style>
    #theme-toggle-btn {
      padding: 0px 0px;
      transition: all 0.3s ease;
      display: flex;
      flex-shrink: 0;
      align-items: center;
      justify-content: center;
      width: 30px;
      position: relative;
    }

    #theme-toggle-btn svg {
      width: 26px;
      height: 26px;
      fill: white;
      transition: all 0.3s ease-out;
    }

    #theme-toggle-btn svg:hover {
      fill: var(--md-primary-blue);
      fill-opacity: 0.5;
    }
  </style> </header> <div class=md-container data-md-component=container> <nav aria-label=标签 class=md-tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a class=md-tabs__link href=../../..> 首页 </a> </li> <li class=md-tabs__item> <a href=../../../blog/ class=md-tabs__link> Blog </a> </li> <li class=md-tabs__item> <a href=../../../about/ class=md-tabs__link> 关于 </a> </li> <li class=md-tabs__item> <a href=../../mkdocs/ class=md-tabs__link> mkdocs </a> </li> <li class=md-tabs__item> <a href=../../DJIflight/ class=md-tabs__link> DJIflight </a> </li> <li class=md-tabs__item> <a href=../../MathNote/ class=md-tabs__link> MathNote </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> FPGAWeblab </a> </li> <li class=md-tabs__item> <a href=../../GEMM/cal_full_conv/ class=md-tabs__link> GEMM </a> </li> <li class=md-tabs__item> <a href=../../../gallery/ class=md-tabs__link> 画廊 </a> </li> <li class=md-tabs__item> <a href=../../../flinks/ class=md-tabs__link> 友链 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=导航栏 class="md-nav md-nav--primary md-nav--lifted" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="Alivender's Blog" class="md-nav__button md-logo" data-md-component=logo href=../../.. title="Alivender's Blog"> <img alt=logo src=../../../img/logo.png> </a> Alivender's Blog </label> <div class=md-nav__source> <a class=md-source data-md-component=source href=https://github.com/Alivenderwww/Alivenderwww.github.io/ title=前往仓库> <div class="md-source__icon md-icon"> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../..> <span class=md-ellipsis> 首页 </span> </a> </li> <li class=md-nav__item> <a href=../../../blog/ class=md-nav__link> <span class=md-ellipsis> Blog </span> </a> </li> <li class=md-nav__item> <a href=../../../about/ class=md-nav__link> <span class=md-ellipsis> 关于 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id=__nav_4 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../mkdocs/ class=md-nav__link> <span class=md-ellipsis> mkdocs </span> </a> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_4_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> mkdocs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../mkdocs/Mkdocs_Metrial_font_rendering/ class=md-nav__link> <span class=md-ellipsis> 关于Mkdocs Metrial自定义字体渲染和优化 </span> </a> </li> <li class=md-nav__item> <a href=../../mkdocs/spine_test/ class=md-nav__link> <span class=md-ellipsis> 基于pixi-spine与kivo.wiki的《蔚蓝档案》角色记忆大厅加载技术 </span> </a> </li> <li class=md-nav__item> <a href=../../mkdocs/giscus_color/ class=md-nav__link> <span class=md-ellipsis> 如何实现Giscus评论区的自动跟随主题配置 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id=__nav_5 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../DJIflight/ class=md-nav__link> <span class=md-ellipsis> DJIflight </span> </a> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_5_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> DJIflight </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../DJIflight/algorithm-flow-and-problems/ class=md-nav__link> <span class=md-ellipsis> DJI 飞行算法流程和问题 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id=__nav_6 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../MathNote/ class=md-nav__link> <span class=md-ellipsis> MathNote </span> </a> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_6_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> MathNote </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id=__nav_6_2 type=checkbox> <label class=md-nav__link for=__nav_6_2 id=__nav_6_2_label tabindex=0> <span class=md-ellipsis> 大学物理 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_6_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> 大学物理 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../MathNote/Daxuewuli/1/ class=md-nav__link> <span class=md-ellipsis> 从零开始的Python速切大物实验🏃 </span> </a> </li> <li class=md-nav__item> <a href=../../MathNote/Daxuewuli/2/ class=md-nav__link> <span class=md-ellipsis> 静电场 高斯定理 </span> </a> </li> <li class=md-nav__item> <a href=../../MathNote/Daxuewuli/3/ class=md-nav__link> <span class=md-ellipsis> 刚体的转动 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id=__nav_6_3 type=checkbox> <label class=md-nav__link for=__nav_6_3 id=__nav_6_3_label tabindex=0> <span class=md-ellipsis> 高等数学 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_6_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> 高等数学 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../MathNote/Gaodengshuxue/1/ class=md-nav__link> <span class=md-ellipsis> 多元函数的基本概念 </span> </a> </li> <li class=md-nav__item> <a href=../../MathNote/Gaodengshuxue/2/ class=md-nav__link> <span class=md-ellipsis> 第八章 多元数量值函数积分学及其应用 </span> </a> </li> <li class=md-nav__item> <a href=../../MathNote/Gaodengshuxue/3/ class=md-nav__link> <span class=md-ellipsis> 第9章 二次型与二次曲面 </span> </a> </li> <li class=md-nav__item> <a href=../../MathNote/Gaodengshuxue/4/ class=md-nav__link> <span class=md-ellipsis> 第九章 向量值函数的曲线积分与曲面积分 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id=__nav_6_4 type=checkbox> <label class=md-nav__link for=__nav_6_4 id=__nav_6_4_label tabindex=0> <span class=md-ellipsis> 电路理论 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_6_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_6_4> <span class="md-nav__icon md-icon"></span> 电路理论 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../MathNote/Dianlulilun/1/ class=md-nav__link> <span class=md-ellipsis> 正弦交流电路 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_7 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../ class=md-nav__link> <span class=md-ellipsis> FPGAWeblab </span> </a> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=true aria-labelledby=__nav_7_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> FPGAWeblab </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../document/ class=md-nav__link> <span class=md-ellipsis> 基于紫光同创FPGA的远程实验室-系统设计报告 </span> </a> </li> <li class=md-nav__item> <a href=../01water_led/ class=md-nav__link> <span class=md-ellipsis> 基础-1-流水灯 </span> </a> </li> <li class=md-nav__item> <a href=../02key/ class=md-nav__link> <span class=md-ellipsis> 基础-2-按键检测与消抖 </span> </a> </li> <li class=md-nav__item> <a href=../03led_display/ class=md-nav__link> <span class=md-ellipsis> 基础-3-数码管实验 </span> </a> </li> <li class=md-nav__item> <a href=../04matrixkey/ class=md-nav__link> <span class=md-ellipsis> 基础-4-矩阵键盘实验 </span> </a> </li> <li class=md-nav__item> <a href=../05pwm/ class=md-nav__link> <span class=md-ellipsis> 基础-5-PWM呼吸灯 </span> </a> </li> <li class=md-nav__item> <a href=../06hdmi/ class=md-nav__link> <span class=md-ellipsis> 基础-6-HDMI显示 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> 进阶-1-密码锁实验 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> 进阶-1-密码锁实验 </span> </a> <nav aria-label=目录 class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#_1> <span class=md-ellipsis> 章节导读 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_2> <span class=md-ellipsis> 理论学习 </span> </a> <nav aria-label=理论学习 class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#fsm> <span class=md-ellipsis> FSM状态机 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_3> <span class=md-ellipsis> 数码管 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_4> <span class=md-ellipsis> 矩阵键盘 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#_5> <span class=md-ellipsis> 实战演练 </span> </a> <nav aria-label=实战演练 class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#_6> <span class=md-ellipsis> 系统架构 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_7> <span class=md-ellipsis> 模块设计 </span> </a> <nav aria-label=模块设计 class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#password_lock> <span class=md-ellipsis> password_lock </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#matrix_key_trigger> <span class=md-ellipsis> matrix_key_trigger </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#password_lock_top> <span class=md-ellipsis> password_lock_top </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#_8> <span class=md-ellipsis> 上板验证步骤 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#_9> <span class=md-ellipsis> 章末总结 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_10> <span class=md-ellipsis> 拓展训练 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../12_sfp/ class=md-nav__link> <span class=md-ellipsis> 进阶-2-光纤通信 </span> </a> </li> <li class=md-nav__item> <a href=../13_frequency_meter/ class=md-nav__link> <span class=md-ellipsis> 进阶-3-频率计 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id=__nav_8 type=checkbox> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> GEMM </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_8_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> GEMM </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../GEMM/cal_full_conv/ class=md-nav__link> <span class=md-ellipsis> 脉动阵列计算全连接层 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id=__nav_9 type=checkbox> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> 画廊 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_9_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> 画廊 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gallery/ class=md-nav__link> <span class=md-ellipsis> Gallery </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id=__nav_10 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../flinks/ class=md-nav__link> <span class=md-ellipsis> 友链 </span> </a> </div> <nav aria-expanded=false aria-labelledby=__nav_10_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> 友链 </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=目录 class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#_1> <span class=md-ellipsis> 章节导读 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_2> <span class=md-ellipsis> 理论学习 </span> </a> <nav aria-label=理论学习 class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#fsm> <span class=md-ellipsis> FSM状态机 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_3> <span class=md-ellipsis> 数码管 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_4> <span class=md-ellipsis> 矩阵键盘 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#_5> <span class=md-ellipsis> 实战演练 </span> </a> <nav aria-label=实战演练 class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#_6> <span class=md-ellipsis> 系统架构 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_7> <span class=md-ellipsis> 模块设计 </span> </a> <nav aria-label=模块设计 class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#password_lock> <span class=md-ellipsis> password_lock </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#matrix_key_trigger> <span class=md-ellipsis> matrix_key_trigger </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#password_lock_top> <span class=md-ellipsis> password_lock_top </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#_8> <span class=md-ellipsis> 上板验证步骤 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#_9> <span class=md-ellipsis> 章末总结 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_10> <span class=md-ellipsis> 拓展训练 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a class="md-content__button md-icon" href=https://github.com/Alivenderwww/Alivenderwww.github.io/blob/main/docs/blogs/FPGAWeblab/11_password_lock.md rel=edit title=编辑此页> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg> </a> <a class="md-content__button md-icon" href=https://github.com/Alivenderwww/Alivenderwww.github.io/raw/main/docs/blogs/FPGAWeblab/11_password_lock.md title=查看本页的源代码> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg> </a> <h1>进阶<span class=heti-skip><span class=heti-spacing> </span>-1-<span class=heti-spacing> </span></span>密码锁实验</h1> <div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;"> <p><span class=twemoji><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"></path></svg></span> 约<span class=heti-skip><span class=heti-spacing> </span>1540<span class=heti-spacing> </span></span>个字 <span class=twemoji><svg viewbox="0 0 576 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M360.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m64.6 136.1c-12.5 12.5-12.5 32.8 0 45.3l73.4 73.4-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0zm-274.7 0c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l73.3-73.4c12.5-12.5 12.5-32.8 0-45.3z"></path></svg></span> <span>274<span class=heti-spacing> </span></span>行代码 <span class=twemoji><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"></path></svg></span> <span>1<span class=heti-spacing> </span></span>张图片 <span class=twemoji><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"></path></svg></span> 预计阅读时间<span class=heti-skip><span class=heti-spacing> </span>9<span class=heti-spacing> </span></span>分钟</p> </div> <h2 id=_1>章节导读<a class=headerlink href=#_1 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h2> <p>本章作为进阶的第一个实验，主要学习状态机的写法和使用，同时联系前面所学的数码管和矩阵键盘，完成一个密码锁的设计。</p> <h2 id=_2>理论学习<a class=headerlink href=#_2 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h2> <h3 id=fsm><span>FSM<span class=heti-spacing> </span></span>状态机<a class=headerlink href=#fsm title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <p>在数字逻辑设计中，<strong>有限状态机（FSM, Finite State Machine）</strong>是一种根据输入和当前状态决定下一个状态和输出的模型，广泛用于顺序逻辑电路的控制部分。</p> <p>在本实验中，我们将使用<span class=heti-skip><span class=heti-spacing> </span>FSM<span class=heti-spacing> </span></span>构建密码锁的控制逻辑，用于管理<strong>按键输入过程、密码比对、开锁显示、错误处理等多个步骤</strong>。</p> <p><span>FSM<span class=heti-spacing> </span></span>通常包含以下几个组成部分：</p> <ul> <li><strong>状态定义（State）</strong>：用来描述系统当前所处的逻辑阶段。例如：待输入、输入中、校验中、成功、失败等。</li> </ul> <ul> <li><strong>状态转移条件（Transition）</strong>：根据输入信号（如按键、定时器、复位）从一个状态跳转到另一个状态。</li> </ul> <ul> <li><strong>输出控制（Output）</strong>：每个状态下系统应有的行为，比如更新数码管、检测密码、拉高开锁信号等。</li> </ul> <p>常见的<span class=heti-skip><span class=heti-spacing> </span>FSM<span class=heti-spacing> </span></span>类型包括：</p> <ul> <li><strong><span>Moore<span class=heti-spacing> </span></span>状态机：</strong>输出只与当前状态有关，结构更稳定；</li> <li><strong><span>Mealy<span class=heti-spacing> </span></span>状态机：</strong>输出与当前状态和输入有关，反应更灵敏。</li> </ul> <p>在本例中我们要设计一个状态机去对密码锁进行控制。首先我们应该先给密码锁分一下他会处于什么状态，每个状态有什么输出（本例中将密码锁设计成下述<span class=heti-skip><span class=heti-spacing> </span>4<span class=heti-spacing> </span></span>个状态<heti-adjacent class=heti-adjacent-half>）</heti-adjacent>：</p> <ol> <li><span>SETUP<span class=heti-spacing> </span></span>状态：该状态下可以设置<span class=heti-skip><span class=heti-spacing> </span>4<span class=heti-spacing> </span></span>位密码，输入<span class=heti-skip><span class=heti-spacing> </span>4<span class=heti-spacing> </span></span>位数字后按<span class=heti-skip><span class=heti-spacing> </span>#<span class=heti-spacing> </span></span>键设置密码有效，<span>*<span class=heti-spacing> </span></span>清空设置，数码管输出<span class=heti-skip><span class=heti-spacing> </span>4<span class=heti-spacing> </span></span>位数字输入</li> <li><span>LOCK<span class=heti-spacing> </span></span>状态：锁定状态，可以输入密码解锁，按<span class=heti-skip><span class=heti-spacing> </span>#<span class=heti-spacing> </span></span>确定，<span>*<span class=heti-spacing> </span></span>键清空输入，数码管输出<span class=heti-skip><span class=heti-spacing> </span>4<span class=heti-spacing> </span></span>位数字输入</li> <li><span>ERROR<span class=heti-spacing> </span></span>状态：如果输入密码错误，或者操作错误，进入此状态，数码管输出<span><span class=heti-spacing> </span>ERROR</span></li> <li><span>UNLOCK<span class=heti-spacing> </span></span>状态：解锁状态，可以按<span class=heti-skip><span class=heti-spacing> </span>*<span class=heti-spacing> </span></span>重设密码，也可以按<span class=heti-skip><span class=heti-spacing> </span>#<span class=heti-spacing> </span></span>重新锁定，数码管输出<span><span class=heti-spacing> </span>UNLOCK</span></li> </ol> <p>然后确定状态之间如何进行转移：</p> <ol> <li><span>SETUP<span class=heti-spacing> </span></span>状态：输入<span class=heti-skip><span class=heti-spacing> </span>4<span class=heti-spacing> </span></span>位数字后按<span class=heti-skip><span class=heti-spacing> </span>#<span class=heti-spacing> </span></span>键设置密码有效，有效后进入<span class=heti-skip><span class=heti-spacing> </span>LOCK<span class=heti-spacing> </span></span>状态</li> <li><span>LOCK<span class=heti-spacing> </span></span>状态：输入密码，按<span class=heti-skip><span class=heti-spacing> </span>#<span class=heti-spacing> </span></span>确定后如果密码正确进入<span class=heti-skip><span class=heti-spacing> </span>UNLOCK<span class=heti-spacing> </span></span>状态，如果错误进入<span class=heti-skip><span class=heti-spacing> </span>ERROR<span class=heti-spacing> </span></span>状态</li> <li><span>ERROR<span class=heti-spacing> </span></span>状态：按下任意按键后进入<span class=heti-skip><span class=heti-spacing> </span>LOCK<span class=heti-spacing> </span></span>状态</li> <li><span>UNLOCK<span class=heti-spacing> </span></span>状态：按下<span class=heti-skip><span class=heti-spacing> </span>#<span class=heti-spacing> </span></span>键进入<span class=heti-skip><span class=heti-spacing> </span>LOCK<span class=heti-spacing> </span></span>状态，按<span class=heti-skip><span class=heti-spacing> </span>*<span class=heti-spacing> </span></span>键进入<span class=heti-skip><span class=heti-spacing> </span>SETUP<span class=heti-spacing> </span></span>状态重设密码</li> </ol> <p>根据上述状态转移逻辑，我们可以画出状态转移图，状态转移图如下图所示：</p> <figure id=__figure-caption_1> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../images/11_1.png><img alt=状态转移图 src=../images/11_1.png></a></p> <figcaption> <p><span class=caption-prefix><span>Figure 1.<span class=heti-spacing> </span></span></span>状态转移图</p> </figcaption> </figure> <p>我们已经了解了本次实验所使用的状态机，那么如何使用<span class=heti-skip><span class=heti-spacing> </span>verilog<span class=heti-spacing> </span></span>编写状态机呢？主要有三种方法，分别是：三段式状态机，二段式状态机，一段式状态机。</p> <p>三段式状态机写法如下：</p> <ul> <li>状态机第一段，时序逻辑，非阻塞赋值，传递寄存器的状态。</li> <li>状态机第二段，组合逻辑，阻塞赋值，根据当前状态和当前输入，确定下一个状态机的状态。</li> <li>状态机第三代，时序逻辑，非阻塞赋值，因为是<span class=heti-skip><span class=heti-spacing> </span>Mealy<span class=heti-spacing> </span></span>型状态机，根据当前状态和当前输入，确定输出信号。</li> </ul> <p>二段式状态机将三段式状态机二三段糅合在一起，一段式状态机则将三段式状态机三段融合。推荐使用三段式状态机，只有在状态转移逻辑非常简单，状态很少时会采用一段式状态机。</p> <h3 id=_3>数码管<a class=headerlink href=#_3 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <p>见基础实验<span><span class=heti-spacing> </span>3</span></p> <h3 id=_4>矩阵键盘<a class=headerlink href=#_4 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <p>见基础实验<span><span class=heti-spacing> </span>4</span></p> <h2 id=_5>实战演练<a class=headerlink href=#_5 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h2> <h3 id=_6>系统架构<a class=headerlink href=#_6 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-verilog highlight"><table class=highlighttable><tbody><tr><th class=filename colspan=2><span class=filename>Verilog</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1></a><span class=err>系统框图：</span>
</span></code></pre></div></td></tr></tbody></table></div> <h3 id=_7>模块设计<a class=headerlink href=#_7 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <p>首先是密码锁状态机逻辑，本例采用三段式状态机写法。代码如下：</p> <h4 id=password_lock>password_lock<a class=headerlink href=#password_lock title="Permanent link">¶</a></h4> <div class="language-verilog highlight"><table class=highlighttable><tbody><tr><th class=filename colspan=2><span class=filename>Verilog</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1>  1</a></span>
<span class=normal><a href=#__codelineno-1-2>  2</a></span>
<span class=normal><a href=#__codelineno-1-3>  3</a></span>
<span class=normal><a href=#__codelineno-1-4>  4</a></span>
<span class=normal><a href=#__codelineno-1-5>  5</a></span>
<span class=normal><a href=#__codelineno-1-6>  6</a></span>
<span class=normal><a href=#__codelineno-1-7>  7</a></span>
<span class=normal><a href=#__codelineno-1-8>  8</a></span>
<span class=normal><a href=#__codelineno-1-9>  9</a></span>
<span class=normal><a href=#__codelineno-1-10> 10</a></span>
<span class=normal><a href=#__codelineno-1-11> 11</a></span>
<span class=normal><a href=#__codelineno-1-12> 12</a></span>
<span class=normal><a href=#__codelineno-1-13> 13</a></span>
<span class=normal><a href=#__codelineno-1-14> 14</a></span>
<span class=normal><a href=#__codelineno-1-15> 15</a></span>
<span class=normal><a href=#__codelineno-1-16> 16</a></span>
<span class=normal><a href=#__codelineno-1-17> 17</a></span>
<span class=normal><a href=#__codelineno-1-18> 18</a></span>
<span class=normal><a href=#__codelineno-1-19> 19</a></span>
<span class=normal><a href=#__codelineno-1-20> 20</a></span>
<span class=normal><a href=#__codelineno-1-21> 21</a></span>
<span class=normal><a href=#__codelineno-1-22> 22</a></span>
<span class=normal><a href=#__codelineno-1-23> 23</a></span>
<span class=normal><a href=#__codelineno-1-24> 24</a></span>
<span class=normal><a href=#__codelineno-1-25> 25</a></span>
<span class=normal><a href=#__codelineno-1-26> 26</a></span>
<span class=normal><a href=#__codelineno-1-27> 27</a></span>
<span class=normal><a href=#__codelineno-1-28> 28</a></span>
<span class=normal><a href=#__codelineno-1-29> 29</a></span>
<span class=normal><a href=#__codelineno-1-30> 30</a></span>
<span class=normal><a href=#__codelineno-1-31> 31</a></span>
<span class=normal><a href=#__codelineno-1-32> 32</a></span>
<span class=normal><a href=#__codelineno-1-33> 33</a></span>
<span class=normal><a href=#__codelineno-1-34> 34</a></span>
<span class=normal><a href=#__codelineno-1-35> 35</a></span>
<span class=normal><a href=#__codelineno-1-36> 36</a></span>
<span class=normal><a href=#__codelineno-1-37> 37</a></span>
<span class=normal><a href=#__codelineno-1-38> 38</a></span>
<span class=normal><a href=#__codelineno-1-39> 39</a></span>
<span class=normal><a href=#__codelineno-1-40> 40</a></span>
<span class=normal><a href=#__codelineno-1-41> 41</a></span>
<span class=normal><a href=#__codelineno-1-42> 42</a></span>
<span class=normal><a href=#__codelineno-1-43> 43</a></span>
<span class=normal><a href=#__codelineno-1-44> 44</a></span>
<span class=normal><a href=#__codelineno-1-45> 45</a></span>
<span class=normal><a href=#__codelineno-1-46> 46</a></span>
<span class=normal><a href=#__codelineno-1-47> 47</a></span>
<span class=normal><a href=#__codelineno-1-48> 48</a></span>
<span class=normal><a href=#__codelineno-1-49> 49</a></span>
<span class=normal><a href=#__codelineno-1-50> 50</a></span>
<span class=normal><a href=#__codelineno-1-51> 51</a></span>
<span class=normal><a href=#__codelineno-1-52> 52</a></span>
<span class=normal><a href=#__codelineno-1-53> 53</a></span>
<span class=normal><a href=#__codelineno-1-54> 54</a></span>
<span class=normal><a href=#__codelineno-1-55> 55</a></span>
<span class=normal><a href=#__codelineno-1-56> 56</a></span>
<span class=normal><a href=#__codelineno-1-57> 57</a></span>
<span class=normal><a href=#__codelineno-1-58> 58</a></span>
<span class=normal><a href=#__codelineno-1-59> 59</a></span>
<span class=normal><a href=#__codelineno-1-60> 60</a></span>
<span class=normal><a href=#__codelineno-1-61> 61</a></span>
<span class=normal><a href=#__codelineno-1-62> 62</a></span>
<span class=normal><a href=#__codelineno-1-63> 63</a></span>
<span class=normal><a href=#__codelineno-1-64> 64</a></span>
<span class=normal><a href=#__codelineno-1-65> 65</a></span>
<span class=normal><a href=#__codelineno-1-66> 66</a></span>
<span class=normal><a href=#__codelineno-1-67> 67</a></span>
<span class=normal><a href=#__codelineno-1-68> 68</a></span>
<span class=normal><a href=#__codelineno-1-69> 69</a></span>
<span class=normal><a href=#__codelineno-1-70> 70</a></span>
<span class=normal><a href=#__codelineno-1-71> 71</a></span>
<span class=normal><a href=#__codelineno-1-72> 72</a></span>
<span class=normal><a href=#__codelineno-1-73> 73</a></span>
<span class=normal><a href=#__codelineno-1-74> 74</a></span>
<span class=normal><a href=#__codelineno-1-75> 75</a></span>
<span class=normal><a href=#__codelineno-1-76> 76</a></span>
<span class=normal><a href=#__codelineno-1-77> 77</a></span>
<span class=normal><a href=#__codelineno-1-78> 78</a></span>
<span class=normal><a href=#__codelineno-1-79> 79</a></span>
<span class=normal><a href=#__codelineno-1-80> 80</a></span>
<span class=normal><a href=#__codelineno-1-81> 81</a></span>
<span class=normal><a href=#__codelineno-1-82> 82</a></span>
<span class=normal><a href=#__codelineno-1-83> 83</a></span>
<span class=normal><a href=#__codelineno-1-84> 84</a></span>
<span class=normal><a href=#__codelineno-1-85> 85</a></span>
<span class=normal><a href=#__codelineno-1-86> 86</a></span>
<span class=normal><a href=#__codelineno-1-87> 87</a></span>
<span class=normal><a href=#__codelineno-1-88> 88</a></span>
<span class=normal><a href=#__codelineno-1-89> 89</a></span>
<span class=normal><a href=#__codelineno-1-90> 90</a></span>
<span class=normal><a href=#__codelineno-1-91> 91</a></span>
<span class=normal><a href=#__codelineno-1-92> 92</a></span>
<span class=normal><a href=#__codelineno-1-93> 93</a></span>
<span class=normal><a href=#__codelineno-1-94> 94</a></span>
<span class=normal><a href=#__codelineno-1-95> 95</a></span>
<span class=normal><a href=#__codelineno-1-96> 96</a></span>
<span class=normal><a href=#__codelineno-1-97> 97</a></span>
<span class=normal><a href=#__codelineno-1-98> 98</a></span>
<span class=normal><a href=#__codelineno-1-99> 99</a></span>
<span class=normal><a href=#__codelineno-1-100>100</a></span>
<span class=normal><a href=#__codelineno-1-101>101</a></span>
<span class=normal><a href=#__codelineno-1-102>102</a></span>
<span class=normal><a href=#__codelineno-1-103>103</a></span>
<span class=normal><a href=#__codelineno-1-104>104</a></span>
<span class=normal><a href=#__codelineno-1-105>105</a></span>
<span class=normal><a href=#__codelineno-1-106>106</a></span>
<span class=normal><a href=#__codelineno-1-107>107</a></span>
<span class=normal><a href=#__codelineno-1-108>108</a></span>
<span class=normal><a href=#__codelineno-1-109>109</a></span>
<span class=normal><a href=#__codelineno-1-110>110</a></span>
<span class=normal><a href=#__codelineno-1-111>111</a></span>
<span class=normal><a href=#__codelineno-1-112>112</a></span>
<span class=normal><a href=#__codelineno-1-113>113</a></span>
<span class=normal><a href=#__codelineno-1-114>114</a></span>
<span class=normal><a href=#__codelineno-1-115>115</a></span>
<span class=normal><a href=#__codelineno-1-116>116</a></span>
<span class=normal><a href=#__codelineno-1-117>117</a></span>
<span class=normal><a href=#__codelineno-1-118>118</a></span>
<span class=normal><a href=#__codelineno-1-119>119</a></span>
<span class=normal><a href=#__codelineno-1-120>120</a></span>
<span class=normal><a href=#__codelineno-1-121>121</a></span>
<span class=normal><a href=#__codelineno-1-122>122</a></span>
<span class=normal><a href=#__codelineno-1-123>123</a></span>
<span class=normal><a href=#__codelineno-1-124>124</a></span>
<span class=normal><a href=#__codelineno-1-125>125</a></span>
<span class=normal><a href=#__codelineno-1-126>126</a></span>
<span class=normal><a href=#__codelineno-1-127>127</a></span>
<span class=normal><a href=#__codelineno-1-128>128</a></span>
<span class=normal><a href=#__codelineno-1-129>129</a></span>
<span class=normal><a href=#__codelineno-1-130>130</a></span>
<span class=normal><a href=#__codelineno-1-131>131</a></span>
<span class=normal><a href=#__codelineno-1-132>132</a></span>
<span class=normal><a href=#__codelineno-1-133>133</a></span>
<span class=normal><a href=#__codelineno-1-134>134</a></span>
<span class=normal><a href=#__codelineno-1-135>135</a></span>
<span class=normal><a href=#__codelineno-1-136>136</a></span>
<span class=normal><a href=#__codelineno-1-137>137</a></span>
<span class=normal><a href=#__codelineno-1-138>138</a></span>
<span class=normal><a href=#__codelineno-1-139>139</a></span>
<span class=normal><a href=#__codelineno-1-140>140</a></span>
<span class=normal><a href=#__codelineno-1-141>141</a></span>
<span class=normal><a href=#__codelineno-1-142>142</a></span>
<span class=normal><a href=#__codelineno-1-143>143</a></span>
<span class=normal><a href=#__codelineno-1-144>144</a></span>
<span class=normal><a href=#__codelineno-1-145>145</a></span>
<span class=normal><a href=#__codelineno-1-146>146</a></span>
<span class=normal><a href=#__codelineno-1-147>147</a></span>
<span class=normal><a href=#__codelineno-1-148>148</a></span>
<span class=normal><a href=#__codelineno-1-149>149</a></span>
<span class=normal><a href=#__codelineno-1-150>150</a></span>
<span class=normal><a href=#__codelineno-1-151>151</a></span>
<span class=normal><a href=#__codelineno-1-152>152</a></span>
<span class=normal><a href=#__codelineno-1-153>153</a></span>
<span class=normal><a href=#__codelineno-1-154>154</a></span>
<span class=normal><a href=#__codelineno-1-155>155</a></span>
<span class=normal><a href=#__codelineno-1-156>156</a></span>
<span class=normal><a href=#__codelineno-1-157>157</a></span>
<span class=normal><a href=#__codelineno-1-158>158</a></span>
<span class=normal><a href=#__codelineno-1-159>159</a></span>
<span class=normal><a href=#__codelineno-1-160>160</a></span>
<span class=normal><a href=#__codelineno-1-161>161</a></span>
<span class=normal><a href=#__codelineno-1-162>162</a></span>
<span class=normal><a href=#__codelineno-1-163>163</a></span>
<span class=normal><a href=#__codelineno-1-164>164</a></span>
<span class=normal><a href=#__codelineno-1-165>165</a></span>
<span class=normal><a href=#__codelineno-1-166>166</a></span>
<span class=normal><a href=#__codelineno-1-167>167</a></span>
<span class=normal><a href=#__codelineno-1-168>168</a></span>
<span class=normal><a href=#__codelineno-1-169>169</a></span>
<span class=normal><a href=#__codelineno-1-170>170</a></span>
<span class=normal><a href=#__codelineno-1-171>171</a></span>
<span class=normal><a href=#__codelineno-1-172>172</a></span>
<span class=normal><a href=#__codelineno-1-173>173</a></span>
<span class=normal><a href=#__codelineno-1-174>174</a></span>
<span class=normal><a href=#__codelineno-1-175>175</a></span>
<span class=normal><a href=#__codelineno-1-176>176</a></span>
<span class=normal><a href=#__codelineno-1-177>177</a></span>
<span class=normal><a href=#__codelineno-1-178>178</a></span>
<span class=normal><a href=#__codelineno-1-179>179</a></span>
<span class=normal><a href=#__codelineno-1-180>180</a></span>
<span class=normal><a href=#__codelineno-1-181>181</a></span>
<span class=normal><a href=#__codelineno-1-182>182</a></span>
<span class=normal><a href=#__codelineno-1-183>183</a></span>
<span class=normal><a href=#__codelineno-1-184>184</a></span>
<span class=normal><a href=#__codelineno-1-185>185</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1></a><span class=k>module</span><span class=w> </span><span class=n>password_lock</span><span class=p>(</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2></a><span class=w>    </span><span class=k>input</span><span class=w>  </span><span class=kt>wire</span><span class=w> </span><span class=n>clk</span><span class=p>,</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3></a><span class=w>    </span><span class=k>input</span><span class=w>  </span><span class=kt>wire</span><span class=w> </span><span class=n>rstn</span><span class=p>,</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4></a><span class=w>    </span><span class=k>input</span><span class=w>  </span><span class=kt>wire</span><span class=w> </span><span class=p>[</span><span class=mh>15</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>key_trigger</span><span class=p>,</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5></a><span class=w>    </span><span class=k>output</span><span class=w>  </span><span class=kt>reg</span><span class=w> </span><span class=p>[</span><span class=mh>8</span><span class=o>*</span><span class=mh>8</span><span class=o>-</span><span class=mh>1</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>assic_seg</span><span class=p>,</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6></a><span class=w>    </span><span class=k>output</span><span class=w> </span><span class=kt>wire</span><span class=w> </span><span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>seg_point</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7></a><span class=p>);</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8></a>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9></a><span class=cm>/*</span>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10></a><span class=cm>    K00   K01   K02   K03   |   1   2   3   A</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11></a><span class=cm>                            |</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12></a><span class=cm>    K04   K05   K06   K07   |   4   5   6   B   </span>
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13></a><span class=cm>                            |</span>
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14></a><span class=cm>    K08   K09   K10   K11   |   7   8   9   C</span>
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15></a><span class=cm>                            |</span>
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16></a><span class=cm>    K12   K13   K14   K15   |   *   0   #   D</span>
</span><span id=__span-1-17><a id=__codelineno-1-17 name=__codelineno-1-17></a><span class=cm>*/</span>
</span><span id=__span-1-18><a id=__codelineno-1-18 name=__codelineno-1-18></a>
</span><span id=__span-1-19><a id=__codelineno-1-19 name=__codelineno-1-19></a><span class=cm>/*</span>
</span><span id=__span-1-20><a id=__codelineno-1-20 name=__codelineno-1-20></a><span class=cm>密码锁状态机设定：</span>
</span><span id=__span-1-21><a id=__codelineno-1-21 name=__codelineno-1-21></a><span class=cm>1. SETUP状态 ：设置密码，按*清空输入，按#确认输入进入LOCK状态，不足4位#键无效</span>
</span><span id=__span-1-22><a id=__codelineno-1-22 name=__codelineno-1-22></a><span class=cm>2. LOCK状态  ：锁定状态，按*清空输入，按#确认输入，不足4位#键无效，密码正确解锁，错误则进入ERROR状态</span>
</span><span id=__span-1-23><a id=__codelineno-1-23 name=__codelineno-1-23></a><span class=cm>3. ERROR状态 ：密码错误状态，按任意键返回LCOK状态</span>
</span><span id=__span-1-24><a id=__codelineno-1-24 name=__codelineno-1-24></a><span class=cm>4. UNLOCK状态：解锁状态，按*重设密码，按#重新锁定，其余键无效</span>
</span><span id=__span-1-25><a id=__codelineno-1-25 name=__codelineno-1-25></a>
</span><span id=__span-1-26><a id=__codelineno-1-26 name=__codelineno-1-26></a><span class=cm>1-D键为输入</span>
</span><span id=__span-1-27><a id=__codelineno-1-27 name=__codelineno-1-27></a><span class=cm>*为清空之前的输入</span>
</span><span id=__span-1-28><a id=__codelineno-1-28 name=__codelineno-1-28></a><span class=cm>#为确认输入</span>
</span><span id=__span-1-29><a id=__codelineno-1-29 name=__codelineno-1-29></a>
</span><span id=__span-1-30><a id=__codelineno-1-30 name=__codelineno-1-30></a><span class=cm>*/</span>
</span><span id=__span-1-31><a id=__codelineno-1-31 name=__codelineno-1-31></a>
</span><span id=__span-1-32><a id=__codelineno-1-32 name=__codelineno-1-32></a><span class=kt>wire</span><span class=w> </span><span class=n>flag_setup_password</span><span class=p>;</span>
</span><span id=__span-1-33><a id=__codelineno-1-33 name=__codelineno-1-33></a><span class=kt>wire</span><span class=w> </span><span class=n>flag_input_pass</span><span class=p>;</span>
</span><span id=__span-1-34><a id=__codelineno-1-34 name=__codelineno-1-34></a><span class=kt>wire</span><span class=w> </span><span class=n>flag_input_confirm</span><span class=p>;</span>
</span><span id=__span-1-35><a id=__codelineno-1-35 name=__codelineno-1-35></a><span class=kt>wire</span><span class=w> </span><span class=n>flag_error_return</span><span class=p>;</span>
</span><span id=__span-1-36><a id=__codelineno-1-36 name=__codelineno-1-36></a><span class=kt>wire</span><span class=w> </span><span class=n>flag_relock</span><span class=p>;</span>
</span><span id=__span-1-37><a id=__codelineno-1-37 name=__codelineno-1-37></a><span class=kt>wire</span><span class=w> </span><span class=n>flag_reset</span><span class=p>;</span>
</span><span id=__span-1-38><a id=__codelineno-1-38 name=__codelineno-1-38></a>
</span><span id=__span-1-39><a id=__codelineno-1-39 name=__codelineno-1-39></a><span class=k>localparam</span><span class=w> </span><span class=p>[</span><span class=mh>2</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>ST_SETUP</span><span class=w>  </span><span class=o>=</span><span class=w> </span><span class=mh>3</span><span class=mb>'b001</span><span class=p>;</span>
</span><span id=__span-1-40><a id=__codelineno-1-40 name=__codelineno-1-40></a><span class=k>localparam</span><span class=w> </span><span class=p>[</span><span class=mh>2</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>ST_LOCK</span><span class=w>   </span><span class=o>=</span><span class=w> </span><span class=mh>3</span><span class=mb>'b010</span><span class=p>;</span>
</span><span id=__span-1-41><a id=__codelineno-1-41 name=__codelineno-1-41></a><span class=k>localparam</span><span class=w> </span><span class=p>[</span><span class=mh>2</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>ST_ERROR</span><span class=w>  </span><span class=o>=</span><span class=w> </span><span class=mh>3</span><span class=mb>'b100</span><span class=p>;</span>
</span><span id=__span-1-42><a id=__codelineno-1-42 name=__codelineno-1-42></a><span class=k>localparam</span><span class=w> </span><span class=p>[</span><span class=mh>2</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>ST_UNLOCK</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mh>3</span><span class=mb>'b101</span><span class=p>;</span>
</span><span id=__span-1-43><a id=__codelineno-1-43 name=__codelineno-1-43></a>
</span><span id=__span-1-44><a id=__codelineno-1-44 name=__codelineno-1-44></a><span class=kt>reg</span><span class=w> </span><span class=p>[</span><span class=mh>2</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>cu_st</span><span class=p>,</span><span class=w> </span><span class=n>nt_st</span><span class=p>;</span>
</span><span id=__span-1-45><a id=__codelineno-1-45 name=__codelineno-1-45></a><span class=kt>reg</span><span class=w> </span><span class=p>[</span><span class=mh>4</span><span class=o>*</span><span class=mh>4</span><span class=o>-</span><span class=mh>1</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>password</span><span class=p>,</span><span class=w> </span><span class=n>input_password</span><span class=p>;</span>
</span><span id=__span-1-46><a id=__codelineno-1-46 name=__codelineno-1-46></a><span class=kt>reg</span><span class=w> </span><span class=p>[</span><span class=mh>2</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>input_num</span><span class=p>;</span>
</span><span id=__span-1-47><a id=__codelineno-1-47 name=__codelineno-1-47></a>
</span><span id=__span-1-48><a id=__codelineno-1-48 name=__codelineno-1-48></a><span class=k>assign</span><span class=w> </span><span class=n>flag_setup_password</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>cu_st</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>ST_SETUP</span><span class=p>)</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>14</span><span class=p>])</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=p>(</span><span class=n>input_num</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mh>3</span><span class=mb>'b100</span><span class=p>);</span>
</span><span id=__span-1-49><a id=__codelineno-1-49 name=__codelineno-1-49></a><span class=k>assign</span><span class=w> </span><span class=n>flag_input_confirm</span><span class=w>  </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>cu_st</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>ST_LOCK</span><span class=p>)</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>14</span><span class=p>])</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=p>(</span><span class=n>input_num</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mh>3</span><span class=mb>'b100</span><span class=p>);</span>
</span><span id=__span-1-50><a id=__codelineno-1-50 name=__codelineno-1-50></a><span class=k>assign</span><span class=w> </span><span class=n>flag_input_pass</span><span class=w>     </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>cu_st</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>ST_LOCK</span><span class=p>)</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=p>(</span><span class=n>password</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>input_password</span><span class=p>)</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=p>(</span><span class=n>input_num</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mh>3</span><span class=mb>'b100</span><span class=p>);</span>
</span><span id=__span-1-51><a id=__codelineno-1-51 name=__codelineno-1-51></a><span class=k>assign</span><span class=w> </span><span class=n>flag_error_return</span><span class=w>   </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>cu_st</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>ST_ERROR</span><span class=p>)</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=p>(</span><span class=o>|</span><span class=n>key_trigger</span><span class=p>);</span>
</span><span id=__span-1-52><a id=__codelineno-1-52 name=__codelineno-1-52></a><span class=k>assign</span><span class=w> </span><span class=n>flag_relock</span><span class=w>         </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>cu_st</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>ST_UNLOCK</span><span class=p>)</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>14</span><span class=p>]);</span>
</span><span id=__span-1-53><a id=__codelineno-1-53 name=__codelineno-1-53></a><span class=k>assign</span><span class=w> </span><span class=n>flag_reset</span><span class=w>          </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>cu_st</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>ST_UNLOCK</span><span class=p>)</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>12</span><span class=p>]);</span>
</span><span id=__span-1-54><a id=__codelineno-1-54 name=__codelineno-1-54></a><span class=c1>//状态机第一段，传递寄存器状态</span>
</span><span id=__span-1-55><a id=__codelineno-1-55 name=__codelineno-1-55></a><span class=k>always</span><span class=w> </span><span class=p>@(</span><span class=k>posedge</span><span class=w> </span><span class=n>clk</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=k>negedge</span><span class=w> </span><span class=n>rstn</span><span class=p>)</span><span class=w> </span><span class=k>begin</span>
</span><span id=__span-1-56><a id=__codelineno-1-56 name=__codelineno-1-56></a><span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=o>~</span><span class=n>rstn</span><span class=p>)</span><span class=w> </span><span class=n>cu_st</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>ST_SETUP</span><span class=p>;</span>
</span><span id=__span-1-57><a id=__codelineno-1-57 name=__codelineno-1-57></a><span class=w>    </span><span class=k>else</span><span class=w> </span><span class=n>cu_st</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>nt_st</span><span class=p>;</span>
</span><span id=__span-1-58><a id=__codelineno-1-58 name=__codelineno-1-58></a><span class=k>end</span>
</span><span id=__span-1-59><a id=__codelineno-1-59 name=__codelineno-1-59></a><span class=c1>//状态机第二段，确定下一个状态机状态</span>
</span><span id=__span-1-60><a id=__codelineno-1-60 name=__codelineno-1-60></a><span class=k>always</span><span class=w> </span><span class=p>@(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>begin</span>
</span><span id=__span-1-61><a id=__codelineno-1-61 name=__codelineno-1-61></a><span class=w>    </span><span class=k>case</span><span class=p>(</span><span class=n>cu_st</span><span class=p>)</span>
</span><span id=__span-1-62><a id=__codelineno-1-62 name=__codelineno-1-62></a><span class=w>        </span><span class=n>ST_SETUP</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>nt_st</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>(</span><span class=n>flag_setup_password</span><span class=p>)</span><span class=o>?</span><span class=p>(</span><span class=n>ST_LOCK</span><span class=p>)</span><span class=o>:</span><span class=p>(</span><span class=n>ST_SETUP</span><span class=p>);</span>
</span><span id=__span-1-63><a id=__codelineno-1-63 name=__codelineno-1-63></a><span class=w>        </span><span class=n>ST_LOCK</span><span class=w>  </span><span class=o>:</span><span class=w> </span><span class=n>nt_st</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>(</span><span class=n>flag_input_confirm</span><span class=p>)</span><span class=o>?</span><span class=p>((</span><span class=n>flag_input_pass</span><span class=p>)</span><span class=o>?</span><span class=p>(</span><span class=n>ST_UNLOCK</span><span class=p>)</span><span class=o>:</span><span class=p>(</span><span class=n>ST_ERROR</span><span class=p>))</span><span class=o>:</span><span class=p>(</span><span class=n>ST_LOCK</span><span class=p>);</span>
</span><span id=__span-1-64><a id=__codelineno-1-64 name=__codelineno-1-64></a><span class=w>        </span><span class=n>ST_ERROR</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>nt_st</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>(</span><span class=n>flag_error_return</span><span class=p>)</span><span class=o>?</span><span class=p>(</span><span class=n>ST_LOCK</span><span class=p>)</span><span class=o>:</span><span class=p>(</span><span class=n>ST_ERROR</span><span class=p>);</span>
</span><span id=__span-1-65><a id=__codelineno-1-65 name=__codelineno-1-65></a><span class=w>        </span><span class=nl>ST_UNLOCK:</span><span class=w> </span><span class=n>nt_st</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>(</span><span class=n>flag_relock</span><span class=p>)</span><span class=o>?</span><span class=p>(</span><span class=n>ST_LOCK</span><span class=p>)</span><span class=o>:</span><span class=p>((</span><span class=n>flag_reset</span><span class=p>)</span><span class=o>?</span><span class=p>(</span><span class=n>ST_SETUP</span><span class=p>)</span><span class=o>:</span><span class=p>(</span><span class=n>ST_UNLOCK</span><span class=p>));</span>
</span><span id=__span-1-66><a id=__codelineno-1-66 name=__codelineno-1-66></a><span class=w>        </span><span class=k>default</span><span class=w>  </span><span class=o>:</span><span class=w> </span><span class=n>nt_st</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>ST_SETUP</span><span class=p>;</span>
</span><span id=__span-1-67><a id=__codelineno-1-67 name=__codelineno-1-67></a><span class=w>    </span><span class=k>endcase</span>
</span><span id=__span-1-68><a id=__codelineno-1-68 name=__codelineno-1-68></a><span class=k>end</span>
</span><span id=__span-1-69><a id=__codelineno-1-69 name=__codelineno-1-69></a><span class=c1>//状态机第三段，根据状态和输入确定输出，这里由于信号较多，分了多个always块，也可以用case语句写在同一个always块中</span>
</span><span id=__span-1-70><a id=__codelineno-1-70 name=__codelineno-1-70></a><span class=k>always</span><span class=w> </span><span class=p>@(</span><span class=k>posedge</span><span class=w> </span><span class=n>clk</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=k>negedge</span><span class=w> </span><span class=n>rstn</span><span class=p>)</span><span class=w> </span><span class=k>begin</span>
</span><span id=__span-1-71><a id=__codelineno-1-71 name=__codelineno-1-71></a><span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=o>~</span><span class=n>rstn</span><span class=p>)</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mh>0</span><span class=p>;</span>
</span><span id=__span-1-72><a id=__codelineno-1-72 name=__codelineno-1-72></a><span class=w>    </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>((</span><span class=n>cu_st</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>ST_SETUP</span><span class=p>)</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=p>(</span><span class=n>input_num</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=mh>3</span><span class=mb>'b100</span><span class=p>))</span><span class=w> </span><span class=k>begin</span>
</span><span id=__span-1-73><a id=__codelineno-1-73 name=__codelineno-1-73></a><span class=w>             </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>00</span><span class=p>])</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h1</span><span class=p>};</span>
</span><span id=__span-1-74><a id=__codelineno-1-74 name=__codelineno-1-74></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>01</span><span class=p>])</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h2</span><span class=p>};</span>
</span><span id=__span-1-75><a id=__codelineno-1-75 name=__codelineno-1-75></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>02</span><span class=p>])</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h3</span><span class=p>};</span>
</span><span id=__span-1-76><a id=__codelineno-1-76 name=__codelineno-1-76></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>03</span><span class=p>])</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'hA</span><span class=p>};</span>
</span><span id=__span-1-77><a id=__codelineno-1-77 name=__codelineno-1-77></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>04</span><span class=p>])</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h4</span><span class=p>};</span>
</span><span id=__span-1-78><a id=__codelineno-1-78 name=__codelineno-1-78></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>05</span><span class=p>])</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h5</span><span class=p>};</span>
</span><span id=__span-1-79><a id=__codelineno-1-79 name=__codelineno-1-79></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>06</span><span class=p>])</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h6</span><span class=p>};</span>
</span><span id=__span-1-80><a id=__codelineno-1-80 name=__codelineno-1-80></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>07</span><span class=p>])</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'hB</span><span class=p>};</span>
</span><span id=__span-1-81><a id=__codelineno-1-81 name=__codelineno-1-81></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>08</span><span class=p>])</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h7</span><span class=p>};</span>
</span><span id=__span-1-82><a id=__codelineno-1-82 name=__codelineno-1-82></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>09</span><span class=p>])</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h8</span><span class=p>};</span>
</span><span id=__span-1-83><a id=__codelineno-1-83 name=__codelineno-1-83></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>10</span><span class=p>])</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h9</span><span class=p>};</span>
</span><span id=__span-1-84><a id=__codelineno-1-84 name=__codelineno-1-84></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>11</span><span class=p>])</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'hC</span><span class=p>};</span>
</span><span id=__span-1-85><a id=__codelineno-1-85 name=__codelineno-1-85></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>12</span><span class=p>])</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mh>0</span><span class=p>;</span>
</span><span id=__span-1-86><a id=__codelineno-1-86 name=__codelineno-1-86></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>13</span><span class=p>])</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h0</span><span class=p>};</span>
</span><span id=__span-1-87><a id=__codelineno-1-87 name=__codelineno-1-87></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>14</span><span class=p>])</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>password</span><span class=p>;</span>
</span><span id=__span-1-88><a id=__codelineno-1-88 name=__codelineno-1-88></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>15</span><span class=p>])</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'hD</span><span class=p>};</span>
</span><span id=__span-1-89><a id=__codelineno-1-89 name=__codelineno-1-89></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>password</span><span class=p>;</span>
</span><span id=__span-1-90><a id=__codelineno-1-90 name=__codelineno-1-90></a><span class=w>    </span><span class=k>end</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=n>password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>password</span><span class=p>;</span>
</span><span id=__span-1-91><a id=__codelineno-1-91 name=__codelineno-1-91></a><span class=k>end</span>
</span><span id=__span-1-92><a id=__codelineno-1-92 name=__codelineno-1-92></a>
</span><span id=__span-1-93><a id=__codelineno-1-93 name=__codelineno-1-93></a><span class=k>always</span><span class=w> </span><span class=p>@(</span><span class=k>posedge</span><span class=w> </span><span class=n>clk</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=k>negedge</span><span class=w> </span><span class=n>rstn</span><span class=p>)</span><span class=w> </span><span class=k>begin</span>
</span><span id=__span-1-94><a id=__codelineno-1-94 name=__codelineno-1-94></a><span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=o>~</span><span class=n>rstn</span><span class=p>)</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mh>0</span><span class=p>;</span>
</span><span id=__span-1-95><a id=__codelineno-1-95 name=__codelineno-1-95></a><span class=w>    </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>cu_st</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>ST_LOCK</span><span class=p>)</span><span class=w> </span><span class=k>begin</span>
</span><span id=__span-1-96><a id=__codelineno-1-96 name=__codelineno-1-96></a><span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=n>input_num</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mh>3</span><span class=mb>'b100</span><span class=p>)</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>input_password</span><span class=p>;</span>
</span><span id=__span-1-97><a id=__codelineno-1-97 name=__codelineno-1-97></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>00</span><span class=p>])</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>input_password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h1</span><span class=p>};</span>
</span><span id=__span-1-98><a id=__codelineno-1-98 name=__codelineno-1-98></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>01</span><span class=p>])</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>input_password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h2</span><span class=p>};</span>
</span><span id=__span-1-99><a id=__codelineno-1-99 name=__codelineno-1-99></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>02</span><span class=p>])</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>input_password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h3</span><span class=p>};</span>
</span><span id=__span-1-100><a id=__codelineno-1-100 name=__codelineno-1-100></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>03</span><span class=p>])</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>input_password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'hA</span><span class=p>};</span>
</span><span id=__span-1-101><a id=__codelineno-1-101 name=__codelineno-1-101></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>04</span><span class=p>])</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>input_password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h4</span><span class=p>};</span>
</span><span id=__span-1-102><a id=__codelineno-1-102 name=__codelineno-1-102></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>05</span><span class=p>])</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>input_password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h5</span><span class=p>};</span>
</span><span id=__span-1-103><a id=__codelineno-1-103 name=__codelineno-1-103></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>06</span><span class=p>])</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>input_password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h6</span><span class=p>};</span>
</span><span id=__span-1-104><a id=__codelineno-1-104 name=__codelineno-1-104></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>07</span><span class=p>])</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>input_password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'hB</span><span class=p>};</span>
</span><span id=__span-1-105><a id=__codelineno-1-105 name=__codelineno-1-105></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>08</span><span class=p>])</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>input_password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h7</span><span class=p>};</span>
</span><span id=__span-1-106><a id=__codelineno-1-106 name=__codelineno-1-106></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>09</span><span class=p>])</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>input_password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h8</span><span class=p>};</span>
</span><span id=__span-1-107><a id=__codelineno-1-107 name=__codelineno-1-107></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>10</span><span class=p>])</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>input_password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h9</span><span class=p>};</span>
</span><span id=__span-1-108><a id=__codelineno-1-108 name=__codelineno-1-108></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>11</span><span class=p>])</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>input_password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'hC</span><span class=p>};</span>
</span><span id=__span-1-109><a id=__codelineno-1-109 name=__codelineno-1-109></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>12</span><span class=p>])</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mh>0</span><span class=p>;</span>
</span><span id=__span-1-110><a id=__codelineno-1-110 name=__codelineno-1-110></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>13</span><span class=p>])</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>input_password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'h0</span><span class=p>};</span>
</span><span id=__span-1-111><a id=__codelineno-1-111 name=__codelineno-1-111></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>14</span><span class=p>])</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>input_password</span><span class=p>;</span>
</span><span id=__span-1-112><a id=__codelineno-1-112 name=__codelineno-1-112></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>15</span><span class=p>])</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>{</span><span class=n>input_password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>3</span><span class=o>*</span><span class=mh>4</span><span class=p>],</span><span class=w> </span><span class=mh>4'hD</span><span class=p>};</span>
</span><span id=__span-1-113><a id=__codelineno-1-113 name=__codelineno-1-113></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>input_password</span><span class=p>;</span>
</span><span id=__span-1-114><a id=__codelineno-1-114 name=__codelineno-1-114></a><span class=w>    </span><span class=k>end</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=n>input_password</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mh>0</span><span class=p>;</span>
</span><span id=__span-1-115><a id=__codelineno-1-115 name=__codelineno-1-115></a><span class=k>end</span>
</span><span id=__span-1-116><a id=__codelineno-1-116 name=__codelineno-1-116></a>
</span><span id=__span-1-117><a id=__codelineno-1-117 name=__codelineno-1-117></a><span class=k>always</span><span class=w> </span><span class=p>@(</span><span class=k>posedge</span><span class=w> </span><span class=n>clk</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=k>negedge</span><span class=w> </span><span class=n>rstn</span><span class=p>)</span><span class=w> </span><span class=k>begin</span>
</span><span id=__span-1-118><a id=__codelineno-1-118 name=__codelineno-1-118></a><span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=o>~</span><span class=n>rstn</span><span class=p>)</span><span class=w> </span><span class=n>input_num</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mh>0</span><span class=p>;</span>
</span><span id=__span-1-119><a id=__codelineno-1-119 name=__codelineno-1-119></a><span class=w>    </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>cu_st</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>ST_SETUP</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>cu_st</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>ST_LOCK</span><span class=p>)</span><span class=w> </span><span class=k>begin</span>
</span><span id=__span-1-120><a id=__codelineno-1-120 name=__codelineno-1-120></a><span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=n>flag_setup_password</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>flag_input_confirm</span><span class=p>)</span><span class=w> </span><span class=n>input_num</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mh>0</span><span class=p>;</span>
</span><span id=__span-1-121><a id=__codelineno-1-121 name=__codelineno-1-121></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>00</span><span class=p>]</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>01</span><span class=p>]</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>02</span><span class=p>]</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>03</span><span class=p>]</span><span class=w> </span><span class=o>||</span>
</span><span id=__span-1-122><a id=__codelineno-1-122 name=__codelineno-1-122></a><span class=w>           </span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>04</span><span class=p>]</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>05</span><span class=p>]</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>06</span><span class=p>]</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>07</span><span class=p>]</span><span class=w> </span><span class=o>||</span>
</span><span id=__span-1-123><a id=__codelineno-1-123 name=__codelineno-1-123></a><span class=w>           </span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>08</span><span class=p>]</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>09</span><span class=p>]</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>10</span><span class=p>]</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>11</span><span class=p>]</span><span class=w> </span><span class=o>||</span>
</span><span id=__span-1-124><a id=__codelineno-1-124 name=__codelineno-1-124></a><span class=w>                              </span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>13</span><span class=p>]</span><span class=w>                    </span><span class=o>||</span><span class=w> </span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>15</span><span class=p>])</span>
</span><span id=__span-1-125><a id=__codelineno-1-125 name=__codelineno-1-125></a><span class=w>            </span><span class=n>input_num</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>(</span><span class=n>input_num</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mh>3</span><span class=mb>'b100</span><span class=p>)</span><span class=o>?</span><span class=p>(</span><span class=n>input_num</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mh>1</span><span class=p>)</span><span class=o>:</span><span class=p>(</span><span class=n>input_num</span><span class=p>);</span>
</span><span id=__span-1-126><a id=__codelineno-1-126 name=__codelineno-1-126></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>key_trigger</span><span class=p>[</span><span class=mh>12</span><span class=p>])</span><span class=w> </span><span class=n>input_num</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mh>0</span><span class=p>;</span>
</span><span id=__span-1-127><a id=__codelineno-1-127 name=__codelineno-1-127></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=n>input_num</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>input_num</span><span class=p>;</span>
</span><span id=__span-1-128><a id=__codelineno-1-128 name=__codelineno-1-128></a><span class=w>    </span><span class=k>end</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=n>input_num</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mh>0</span><span class=p>;</span>
</span><span id=__span-1-129><a id=__codelineno-1-129 name=__codelineno-1-129></a><span class=k>end</span>
</span><span id=__span-1-130><a id=__codelineno-1-130 name=__codelineno-1-130></a>
</span><span id=__span-1-131><a id=__codelineno-1-131 name=__codelineno-1-131></a><span class=k>assign</span><span class=w> </span><span class=n>seg_point</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mh>8</span><span class=mb>'b0</span><span class=p>;</span>
</span><span id=__span-1-132><a id=__codelineno-1-132 name=__codelineno-1-132></a><span class=k>always</span><span class=w> </span><span class=p>@(</span><span class=k>posedge</span><span class=w> </span><span class=n>clk</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=k>negedge</span><span class=w> </span><span class=n>rstn</span><span class=p>)</span><span class=w> </span><span class=k>begin</span>
</span><span id=__span-1-133><a id=__codelineno-1-133 name=__codelineno-1-133></a><span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=o>~</span><span class=n>rstn</span><span class=p>)</span><span class=w> </span><span class=n>assic_seg</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=s>"12345678"</span><span class=p>;</span>
</span><span id=__span-1-134><a id=__codelineno-1-134 name=__codelineno-1-134></a><span class=w>    </span><span class=k>else</span><span class=w> </span><span class=k>case</span><span class=p>(</span><span class=n>cu_st</span><span class=p>)</span>
</span><span id=__span-1-135><a id=__codelineno-1-135 name=__codelineno-1-135></a><span class=w>        </span><span class=n>ST_SETUP</span><span class=w> </span><span class=o>:</span><span class=k>begin</span>
</span><span id=__span-1-136><a id=__codelineno-1-136 name=__codelineno-1-136></a><span class=w>            </span><span class=n>assic_seg</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>8</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=s>"-"</span><span class=p>;</span>
</span><span id=__span-1-137><a id=__codelineno-1-137 name=__codelineno-1-137></a><span class=w>            </span><span class=n>assic_seg</span><span class=p>[</span><span class=mh>8</span><span class=o>+:</span><span class=mh>8</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=s>"-"</span><span class=p>;</span>
</span><span id=__span-1-138><a id=__codelineno-1-138 name=__codelineno-1-138></a><span class=w>            </span><span class=n>assic_seg</span><span class=p>[</span><span class=mh>16</span><span class=o>+:</span><span class=mh>8</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>(</span><span class=n>input_num</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mh>0</span><span class=p>)</span><span class=o>?</span><span class=p>(</span><span class=n>hex2assic</span><span class=p>(</span><span class=n>password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>4</span><span class=p>]))</span><span class=o>:</span><span class=p>(</span><span class=s>"_"</span><span class=p>);</span>
</span><span id=__span-1-139><a id=__codelineno-1-139 name=__codelineno-1-139></a><span class=w>            </span><span class=n>assic_seg</span><span class=p>[</span><span class=mh>24</span><span class=o>+:</span><span class=mh>8</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>(</span><span class=n>input_num</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mh>1</span><span class=p>)</span><span class=o>?</span><span class=p>(</span><span class=n>hex2assic</span><span class=p>(</span><span class=n>password</span><span class=p>[</span><span class=mh>4</span><span class=o>+:</span><span class=mh>4</span><span class=p>]))</span><span class=o>:</span><span class=p>(</span><span class=s>"_"</span><span class=p>);</span>
</span><span id=__span-1-140><a id=__codelineno-1-140 name=__codelineno-1-140></a><span class=w>            </span><span class=n>assic_seg</span><span class=p>[</span><span class=mh>32</span><span class=o>+:</span><span class=mh>8</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>(</span><span class=n>input_num</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mh>2</span><span class=p>)</span><span class=o>?</span><span class=p>(</span><span class=n>hex2assic</span><span class=p>(</span><span class=n>password</span><span class=p>[</span><span class=mh>8</span><span class=o>+:</span><span class=mh>4</span><span class=p>]))</span><span class=o>:</span><span class=p>(</span><span class=s>"_"</span><span class=p>);</span>
</span><span id=__span-1-141><a id=__codelineno-1-141 name=__codelineno-1-141></a><span class=w>            </span><span class=n>assic_seg</span><span class=p>[</span><span class=mh>40</span><span class=o>+:</span><span class=mh>8</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>(</span><span class=n>input_num</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mh>3</span><span class=p>)</span><span class=o>?</span><span class=p>(</span><span class=n>hex2assic</span><span class=p>(</span><span class=n>password</span><span class=p>[</span><span class=mh>12</span><span class=o>+:</span><span class=mh>4</span><span class=p>]))</span><span class=o>:</span><span class=p>(</span><span class=s>"_"</span><span class=p>);</span>
</span><span id=__span-1-142><a id=__codelineno-1-142 name=__codelineno-1-142></a><span class=w>            </span><span class=n>assic_seg</span><span class=p>[</span><span class=mh>48</span><span class=o>+:</span><span class=mh>8</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=s>"-"</span><span class=p>;</span>
</span><span id=__span-1-143><a id=__codelineno-1-143 name=__codelineno-1-143></a><span class=w>            </span><span class=n>assic_seg</span><span class=p>[</span><span class=mh>56</span><span class=o>+:</span><span class=mh>8</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=s>"-"</span><span class=p>;</span>
</span><span id=__span-1-144><a id=__codelineno-1-144 name=__codelineno-1-144></a><span class=w>        </span><span class=k>end</span>
</span><span id=__span-1-145><a id=__codelineno-1-145 name=__codelineno-1-145></a><span class=w>        </span><span class=n>ST_LOCK</span><span class=w>  </span><span class=o>:</span><span class=k>begin</span>
</span><span id=__span-1-146><a id=__codelineno-1-146 name=__codelineno-1-146></a><span class=w>            </span><span class=n>assic_seg</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>8</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=s>"="</span><span class=p>;</span>
</span><span id=__span-1-147><a id=__codelineno-1-147 name=__codelineno-1-147></a><span class=w>            </span><span class=n>assic_seg</span><span class=p>[</span><span class=mh>8</span><span class=o>+:</span><span class=mh>8</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=s>"="</span><span class=p>;</span>
</span><span id=__span-1-148><a id=__codelineno-1-148 name=__codelineno-1-148></a><span class=w>            </span><span class=n>assic_seg</span><span class=p>[</span><span class=mh>16</span><span class=o>+:</span><span class=mh>8</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>(</span><span class=n>input_num</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mh>0</span><span class=p>)</span><span class=o>?</span><span class=p>(</span><span class=n>hex2assic</span><span class=p>(</span><span class=n>input_password</span><span class=p>[</span><span class=mh>0</span><span class=o>+:</span><span class=mh>4</span><span class=p>]))</span><span class=o>:</span><span class=p>(</span><span class=s>"-"</span><span class=p>);</span>
</span><span id=__span-1-149><a id=__codelineno-1-149 name=__codelineno-1-149></a><span class=w>            </span><span class=n>assic_seg</span><span class=p>[</span><span class=mh>24</span><span class=o>+:</span><span class=mh>8</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>(</span><span class=n>input_num</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mh>1</span><span class=p>)</span><span class=o>?</span><span class=p>(</span><span class=n>hex2assic</span><span class=p>(</span><span class=n>input_password</span><span class=p>[</span><span class=mh>4</span><span class=o>+:</span><span class=mh>4</span><span class=p>]))</span><span class=o>:</span><span class=p>(</span><span class=s>"-"</span><span class=p>);</span>
</span><span id=__span-1-150><a id=__codelineno-1-150 name=__codelineno-1-150></a><span class=w>            </span><span class=n>assic_seg</span><span class=p>[</span><span class=mh>32</span><span class=o>+:</span><span class=mh>8</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>(</span><span class=n>input_num</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mh>2</span><span class=p>)</span><span class=o>?</span><span class=p>(</span><span class=n>hex2assic</span><span class=p>(</span><span class=n>input_password</span><span class=p>[</span><span class=mh>8</span><span class=o>+:</span><span class=mh>4</span><span class=p>]))</span><span class=o>:</span><span class=p>(</span><span class=s>"-"</span><span class=p>);</span>
</span><span id=__span-1-151><a id=__codelineno-1-151 name=__codelineno-1-151></a><span class=w>            </span><span class=n>assic_seg</span><span class=p>[</span><span class=mh>40</span><span class=o>+:</span><span class=mh>8</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>(</span><span class=n>input_num</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mh>3</span><span class=p>)</span><span class=o>?</span><span class=p>(</span><span class=n>hex2assic</span><span class=p>(</span><span class=n>input_password</span><span class=p>[</span><span class=mh>12</span><span class=o>+:</span><span class=mh>4</span><span class=p>]))</span><span class=o>:</span><span class=p>(</span><span class=s>"-"</span><span class=p>);</span>
</span><span id=__span-1-152><a id=__codelineno-1-152 name=__codelineno-1-152></a><span class=w>            </span><span class=n>assic_seg</span><span class=p>[</span><span class=mh>48</span><span class=o>+:</span><span class=mh>8</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=s>"="</span><span class=p>;</span>
</span><span id=__span-1-153><a id=__codelineno-1-153 name=__codelineno-1-153></a><span class=w>            </span><span class=n>assic_seg</span><span class=p>[</span><span class=mh>56</span><span class=o>+:</span><span class=mh>8</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=s>"="</span><span class=p>;</span>
</span><span id=__span-1-154><a id=__codelineno-1-154 name=__codelineno-1-154></a><span class=w>        </span><span class=k>end</span>
</span><span id=__span-1-155><a id=__codelineno-1-155 name=__codelineno-1-155></a><span class=w>        </span><span class=n>ST_ERROR</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>assic_seg</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=s>"  ERROR "</span><span class=p>;</span>
</span><span id=__span-1-156><a id=__codelineno-1-156 name=__codelineno-1-156></a><span class=w>        </span><span class=nl>ST_UNLOCK:</span><span class=w> </span><span class=n>assic_seg</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=s>" unlock "</span><span class=p>;</span>
</span><span id=__span-1-157><a id=__codelineno-1-157 name=__codelineno-1-157></a><span class=w>        </span><span class=k>default</span><span class=w>  </span><span class=o>:</span><span class=w> </span><span class=n>assic_seg</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=s>"12345678"</span><span class=p>;</span>
</span><span id=__span-1-158><a id=__codelineno-1-158 name=__codelineno-1-158></a><span class=w>    </span><span class=k>endcase</span>
</span><span id=__span-1-159><a id=__codelineno-1-159 name=__codelineno-1-159></a><span class=k>end</span>
</span><span id=__span-1-160><a id=__codelineno-1-160 name=__codelineno-1-160></a>
</span><span id=__span-1-161><a id=__codelineno-1-161 name=__codelineno-1-161></a>
</span><span id=__span-1-162><a id=__codelineno-1-162 name=__codelineno-1-162></a><span class=k>function</span><span class=w> </span><span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>hex2assic</span><span class=p>;</span>
</span><span id=__span-1-163><a id=__codelineno-1-163 name=__codelineno-1-163></a><span class=w>    </span><span class=k>input</span><span class=w> </span><span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>hex</span><span class=p>;</span>
</span><span id=__span-1-164><a id=__codelineno-1-164 name=__codelineno-1-164></a><span class=w>    </span><span class=k>case</span><span class=p>(</span><span class=n>hex</span><span class=p>)</span>
</span><span id=__span-1-165><a id=__codelineno-1-165 name=__codelineno-1-165></a><span class=w>        </span><span class=mh>4'h0</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"0"</span><span class=p>;</span><span class=w> </span><span class=c1>// 0</span>
</span><span id=__span-1-166><a id=__codelineno-1-166 name=__codelineno-1-166></a><span class=w>        </span><span class=mh>4'h1</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"1"</span><span class=p>;</span><span class=w> </span><span class=c1>// 1</span>
</span><span id=__span-1-167><a id=__codelineno-1-167 name=__codelineno-1-167></a><span class=w>        </span><span class=mh>4'h2</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"2"</span><span class=p>;</span><span class=w> </span><span class=c1>// 2</span>
</span><span id=__span-1-168><a id=__codelineno-1-168 name=__codelineno-1-168></a><span class=w>        </span><span class=mh>4'h3</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"3"</span><span class=p>;</span><span class=w> </span><span class=c1>// 3</span>
</span><span id=__span-1-169><a id=__codelineno-1-169 name=__codelineno-1-169></a><span class=w>        </span><span class=mh>4'h4</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"4"</span><span class=p>;</span><span class=w> </span><span class=c1>// 4</span>
</span><span id=__span-1-170><a id=__codelineno-1-170 name=__codelineno-1-170></a><span class=w>        </span><span class=mh>4'h5</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"5"</span><span class=p>;</span><span class=w> </span><span class=c1>// 5</span>
</span><span id=__span-1-171><a id=__codelineno-1-171 name=__codelineno-1-171></a><span class=w>        </span><span class=mh>4'h6</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"6"</span><span class=p>;</span><span class=w> </span><span class=c1>// 6</span>
</span><span id=__span-1-172><a id=__codelineno-1-172 name=__codelineno-1-172></a><span class=w>        </span><span class=mh>4'h7</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"7"</span><span class=p>;</span><span class=w> </span><span class=c1>// 7</span>
</span><span id=__span-1-173><a id=__codelineno-1-173 name=__codelineno-1-173></a><span class=w>        </span><span class=mh>4'h8</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"8"</span><span class=p>;</span><span class=w> </span><span class=c1>// 8</span>
</span><span id=__span-1-174><a id=__codelineno-1-174 name=__codelineno-1-174></a><span class=w>        </span><span class=mh>4'h9</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"9"</span><span class=p>;</span><span class=w> </span><span class=c1>// 9</span>
</span><span id=__span-1-175><a id=__codelineno-1-175 name=__codelineno-1-175></a><span class=w>        </span><span class=mh>4'hA</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"A"</span><span class=p>;</span><span class=w> </span><span class=c1>// A</span>
</span><span id=__span-1-176><a id=__codelineno-1-176 name=__codelineno-1-176></a><span class=w>        </span><span class=mh>4'hB</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"B"</span><span class=p>;</span><span class=w> </span><span class=c1>// B</span>
</span><span id=__span-1-177><a id=__codelineno-1-177 name=__codelineno-1-177></a><span class=w>        </span><span class=mh>4'hC</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"C"</span><span class=p>;</span><span class=w> </span><span class=c1>// C</span>
</span><span id=__span-1-178><a id=__codelineno-1-178 name=__codelineno-1-178></a><span class=w>        </span><span class=mh>4'hD</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"D"</span><span class=p>;</span><span class=w> </span><span class=c1>// D</span>
</span><span id=__span-1-179><a id=__codelineno-1-179 name=__codelineno-1-179></a><span class=w>        </span><span class=mh>4'hE</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"E"</span><span class=p>;</span><span class=w> </span><span class=c1>// E</span>
</span><span id=__span-1-180><a id=__codelineno-1-180 name=__codelineno-1-180></a><span class=w>        </span><span class=mh>4'hF</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"F"</span><span class=p>;</span><span class=w> </span><span class=c1>// F</span>
</span><span id=__span-1-181><a id=__codelineno-1-181 name=__codelineno-1-181></a><span class=w>        </span><span class=k>default</span><span class=o>:</span><span class=w> </span><span class=n>hex2assic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>" "</span><span class=p>;</span>
</span><span id=__span-1-182><a id=__codelineno-1-182 name=__codelineno-1-182></a><span class=w>    </span><span class=k>endcase</span>
</span><span id=__span-1-183><a id=__codelineno-1-183 name=__codelineno-1-183></a><span class=k>endfunction</span>
</span><span id=__span-1-184><a id=__codelineno-1-184 name=__codelineno-1-184></a>
</span><span id=__span-1-185><a id=__codelineno-1-185 name=__codelineno-1-185></a><span class=k>endmodule</span><span class=w> </span><span class=c1>//password_lock</span>
</span></code></pre></div></td></tr></tbody></table></div> <p>矩阵键盘行扫描模块在前面基础实验已经介绍过，但这次实验还需要为矩阵键盘添加按键上升沿检测模块，代码如下：</p> <h4 id=matrix_key_trigger>matrix_key_trigger<a class=headerlink href=#matrix_key_trigger title="Permanent link">¶</a></h4> <div class="language-verilog highlight"><table class=highlighttable><tbody><tr><th class=filename colspan=2><span class=filename>Verilog</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1> 1</a></span>
<span class=normal><a href=#__codelineno-2-2> 2</a></span>
<span class=normal><a href=#__codelineno-2-3> 3</a></span>
<span class=normal><a href=#__codelineno-2-4> 4</a></span>
<span class=normal><a href=#__codelineno-2-5> 5</a></span>
<span class=normal><a href=#__codelineno-2-6> 6</a></span>
<span class=normal><a href=#__codelineno-2-7> 7</a></span>
<span class=normal><a href=#__codelineno-2-8> 8</a></span>
<span class=normal><a href=#__codelineno-2-9> 9</a></span>
<span class=normal><a href=#__codelineno-2-10>10</a></span>
<span class=normal><a href=#__codelineno-2-11>11</a></span>
<span class=normal><a href=#__codelineno-2-12>12</a></span>
<span class=normal><a href=#__codelineno-2-13>13</a></span>
<span class=normal><a href=#__codelineno-2-14>14</a></span>
<span class=normal><a href=#__codelineno-2-15>15</a></span>
<span class=normal><a href=#__codelineno-2-16>16</a></span>
<span class=normal><a href=#__codelineno-2-17>17</a></span>
<span class=normal><a href=#__codelineno-2-18>18</a></span>
<span class=normal><a href=#__codelineno-2-19>19</a></span>
<span class=normal><a href=#__codelineno-2-20>20</a></span>
<span class=normal><a href=#__codelineno-2-21>21</a></span>
<span class=normal><a href=#__codelineno-2-22>22</a></span>
<span class=normal><a href=#__codelineno-2-23>23</a></span>
<span class=normal><a href=#__codelineno-2-24>24</a></span>
<span class=normal><a href=#__codelineno-2-25>25</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1></a><span class=k>module</span><span class=w> </span><span class=n>matrix_key_trigger</span><span class=p>(</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2></a><span class=w>    </span><span class=k>input</span><span class=w>  </span><span class=kt>wire</span><span class=w> </span><span class=n>clk</span><span class=p>,</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3></a><span class=w>    </span><span class=k>input</span><span class=w>  </span><span class=kt>wire</span><span class=w> </span><span class=n>rstn</span><span class=p>,</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4></a><span class=w>    </span><span class=k>input</span><span class=w>  </span><span class=kt>wire</span><span class=w> </span><span class=p>[</span><span class=mh>15</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>key</span><span class=p>,</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5></a><span class=w>    </span><span class=k>output</span><span class=w> </span><span class=kt>wire</span><span class=w> </span><span class=p>[</span><span class=mh>15</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>key_trigger</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6></a><span class=p>);</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7></a>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8></a><span class=c1>// 按键上升沿捕获模块</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9></a>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10></a><span class=kt>reg</span><span class=w> </span><span class=p>[</span><span class=mh>15</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>key_d</span><span class=p>;</span><span class=w> </span><span class=c1>// 上一时钟周期的按键状态</span>
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11></a><span class=kt>reg</span><span class=w> </span><span class=p>[</span><span class=mh>15</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>key_d2</span><span class=p>;</span><span class=w> </span><span class=c1>// 上两时钟周期的按键状态</span>
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12></a>
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13></a><span class=k>assign</span><span class=w> </span><span class=n>key_trigger</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>key_d</span><span class=p>)</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=p>(</span><span class=o>~</span><span class=n>key_d2</span><span class=p>);</span>
</span><span id=__span-2-14><a id=__codelineno-2-14 name=__codelineno-2-14></a>
</span><span id=__span-2-15><a id=__codelineno-2-15 name=__codelineno-2-15></a><span class=k>always</span><span class=w> </span><span class=p>@(</span><span class=k>posedge</span><span class=w> </span><span class=n>clk</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=k>negedge</span><span class=w> </span><span class=n>rstn</span><span class=p>)</span><span class=w> </span><span class=k>begin</span>
</span><span id=__span-2-16><a id=__codelineno-2-16 name=__codelineno-2-16></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>rstn</span><span class=p>)</span><span class=w> </span><span class=k>begin</span>
</span><span id=__span-2-17><a id=__codelineno-2-17 name=__codelineno-2-17></a><span class=w>        </span><span class=n>key_d</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mh>0</span><span class=p>;</span>
</span><span id=__span-2-18><a id=__codelineno-2-18 name=__codelineno-2-18></a><span class=w>        </span><span class=n>key_d2</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mh>0</span><span class=p>;</span>
</span><span id=__span-2-19><a id=__codelineno-2-19 name=__codelineno-2-19></a><span class=w>    </span><span class=k>end</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>begin</span>
</span><span id=__span-2-20><a id=__codelineno-2-20 name=__codelineno-2-20></a><span class=w>        </span><span class=n>key_d</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>key</span><span class=p>;</span>
</span><span id=__span-2-21><a id=__codelineno-2-21 name=__codelineno-2-21></a><span class=w>        </span><span class=n>key_d2</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>key_d</span><span class=p>;</span>
</span><span id=__span-2-22><a id=__codelineno-2-22 name=__codelineno-2-22></a><span class=w>    </span><span class=k>end</span>
</span><span id=__span-2-23><a id=__codelineno-2-23 name=__codelineno-2-23></a><span class=k>end</span>
</span><span id=__span-2-24><a id=__codelineno-2-24 name=__codelineno-2-24></a>
</span><span id=__span-2-25><a id=__codelineno-2-25 name=__codelineno-2-25></a><span class=k>endmodule</span><span class=w> </span><span class=c1>//matrix_key_decode</span>
</span></code></pre></div></td></tr></tbody></table></div> <p>至于数码管模块，为了方便，在<span class=heti-skip><span class=heti-spacing> </span>led_display_driver<span class=heti-spacing> </span></span>模块添加了参数定义，并未进行其他修改。</p> <p>最后将几个模块例化在顶层，将端口相连接，代码如下所示：</p> <h4 id=password_lock_top>password_lock_top<a class=headerlink href=#password_lock_top title="Permanent link">¶</a></h4> <div class="language-verilog highlight"><table class=highlighttable><tbody><tr><th class=filename colspan=2><span class=filename>Verilog</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-3-1> 1</a></span>
<span class=normal><a href=#__codelineno-3-2> 2</a></span>
<span class=normal><a href=#__codelineno-3-3> 3</a></span>
<span class=normal><a href=#__codelineno-3-4> 4</a></span>
<span class=normal><a href=#__codelineno-3-5> 5</a></span>
<span class=normal><a href=#__codelineno-3-6> 6</a></span>
<span class=normal><a href=#__codelineno-3-7> 7</a></span>
<span class=normal><a href=#__codelineno-3-8> 8</a></span>
<span class=normal><a href=#__codelineno-3-9> 9</a></span>
<span class=normal><a href=#__codelineno-3-10>10</a></span>
<span class=normal><a href=#__codelineno-3-11>11</a></span>
<span class=normal><a href=#__codelineno-3-12>12</a></span>
<span class=normal><a href=#__codelineno-3-13>13</a></span>
<span class=normal><a href=#__codelineno-3-14>14</a></span>
<span class=normal><a href=#__codelineno-3-15>15</a></span>
<span class=normal><a href=#__codelineno-3-16>16</a></span>
<span class=normal><a href=#__codelineno-3-17>17</a></span>
<span class=normal><a href=#__codelineno-3-18>18</a></span>
<span class=normal><a href=#__codelineno-3-19>19</a></span>
<span class=normal><a href=#__codelineno-3-20>20</a></span>
<span class=normal><a href=#__codelineno-3-21>21</a></span>
<span class=normal><a href=#__codelineno-3-22>22</a></span>
<span class=normal><a href=#__codelineno-3-23>23</a></span>
<span class=normal><a href=#__codelineno-3-24>24</a></span>
<span class=normal><a href=#__codelineno-3-25>25</a></span>
<span class=normal><a href=#__codelineno-3-26>26</a></span>
<span class=normal><a href=#__codelineno-3-27>27</a></span>
<span class=normal><a href=#__codelineno-3-28>28</a></span>
<span class=normal><a href=#__codelineno-3-29>29</a></span>
<span class=normal><a href=#__codelineno-3-30>30</a></span>
<span class=normal><a href=#__codelineno-3-31>31</a></span>
<span class=normal><a href=#__codelineno-3-32>32</a></span>
<span class=normal><a href=#__codelineno-3-33>33</a></span>
<span class=normal><a href=#__codelineno-3-34>34</a></span>
<span class=normal><a href=#__codelineno-3-35>35</a></span>
<span class=normal><a href=#__codelineno-3-36>36</a></span>
<span class=normal><a href=#__codelineno-3-37>37</a></span>
<span class=normal><a href=#__codelineno-3-38>38</a></span>
<span class=normal><a href=#__codelineno-3-39>39</a></span>
<span class=normal><a href=#__codelineno-3-40>40</a></span>
<span class=normal><a href=#__codelineno-3-41>41</a></span>
<span class=normal><a href=#__codelineno-3-42>42</a></span>
<span class=normal><a href=#__codelineno-3-43>43</a></span>
<span class=normal><a href=#__codelineno-3-44>44</a></span>
<span class=normal><a href=#__codelineno-3-45>45</a></span>
<span class=normal><a href=#__codelineno-3-46>46</a></span>
<span class=normal><a href=#__codelineno-3-47>47</a></span>
<span class=normal><a href=#__codelineno-3-48>48</a></span>
<span class=normal><a href=#__codelineno-3-49>49</a></span>
<span class=normal><a href=#__codelineno-3-50>50</a></span>
<span class=normal><a href=#__codelineno-3-51>51</a></span>
<span class=normal><a href=#__codelineno-3-52>52</a></span>
<span class=normal><a href=#__codelineno-3-53>53</a></span>
<span class=normal><a href=#__codelineno-3-54>54</a></span>
<span class=normal><a href=#__codelineno-3-55>55</a></span>
<span class=normal><a href=#__codelineno-3-56>56</a></span>
<span class=normal><a href=#__codelineno-3-57>57</a></span>
<span class=normal><a href=#__codelineno-3-58>58</a></span>
<span class=normal><a href=#__codelineno-3-59>59</a></span>
<span class=normal><a href=#__codelineno-3-60>60</a></span>
<span class=normal><a href=#__codelineno-3-61>61</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1></a><span class=k>module</span><span class=w> </span><span class=n>password_lock_top</span><span class=w> </span><span class=p>#(</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2></a><span class=w>    </span><span class=k>parameter</span><span class=w> </span><span class=n>VALID_SIGNAL</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mh>1</span><span class=mb>'b0</span><span class=p>,</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3></a><span class=w>    </span><span class=k>parameter</span><span class=w> </span><span class=n>CLK_CYCLE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mh>5000</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4></a><span class=p>)(</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5></a><span class=c1>//system io</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6></a><span class=k>input</span><span class=w>  </span><span class=kt>wire</span><span class=w>       </span><span class=n>external_clk</span><span class=w> </span><span class=p>,</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7></a><span class=k>input</span><span class=w>  </span><span class=kt>wire</span><span class=w>       </span><span class=n>external_rstn</span><span class=p>,</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8></a>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9></a><span class=k>output</span><span class=w> </span><span class=kt>wire</span><span class=w> </span><span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>led_display_seg</span><span class=p>,</span>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10></a><span class=k>output</span><span class=w> </span><span class=kt>wire</span><span class=w> </span><span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>led_display_sel</span><span class=p>,</span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11></a>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12></a><span class=k>input</span><span class=w>  </span><span class=kt>wire</span><span class=w> </span><span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>col</span><span class=p>,</span>
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13></a><span class=k>output</span><span class=w> </span><span class=kt>wire</span><span class=w> </span><span class=p>[</span><span class=mh>3</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>row</span>
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14></a><span class=p>);</span>
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15></a>
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16></a><span class=kt>wire</span><span class=w> </span><span class=p>[</span><span class=mh>15</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>key_out</span><span class=p>;</span>
</span><span id=__span-3-17><a id=__codelineno-3-17 name=__codelineno-3-17></a><span class=kt>wire</span><span class=w> </span><span class=p>[</span><span class=mh>15</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>key_trigger</span><span class=p>;</span>
</span><span id=__span-3-18><a id=__codelineno-3-18 name=__codelineno-3-18></a><span class=kt>wire</span><span class=w> </span><span class=p>[</span><span class=mh>8</span><span class=o>*</span><span class=mh>8</span><span class=o>-</span><span class=mh>1</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>assic_seg</span><span class=p>;</span>
</span><span id=__span-3-19><a id=__codelineno-3-19 name=__codelineno-3-19></a><span class=kt>wire</span><span class=w> </span><span class=p>[</span><span class=mh>7</span><span class=o>:</span><span class=mh>0</span><span class=p>]</span><span class=w> </span><span class=n>seg_point</span><span class=p>;</span>
</span><span id=__span-3-20><a id=__codelineno-3-20 name=__codelineno-3-20></a>
</span><span id=__span-3-21><a id=__codelineno-3-21 name=__codelineno-3-21></a><span class=n>led_display_driver</span><span class=w> </span><span class=p>#(</span>
</span><span id=__span-3-22><a id=__codelineno-3-22 name=__codelineno-3-22></a><span class=w>    </span><span class=p>.</span><span class=n>VALID_SIGNAL</span><span class=w> </span><span class=p>(</span><span class=n>VALID_SIGNAL</span><span class=p>),</span>
</span><span id=__span-3-23><a id=__codelineno-3-23 name=__codelineno-3-23></a><span class=w>    </span><span class=p>.</span><span class=n>CLK_CYCLE</span><span class=w> </span><span class=p>(</span><span class=n>CLK_CYCLE</span><span class=p>)</span>
</span><span id=__span-3-24><a id=__codelineno-3-24 name=__codelineno-3-24></a><span class=p>)</span><span class=n>u_led_display_driver</span><span class=p>(</span>
</span><span id=__span-3-25><a id=__codelineno-3-25 name=__codelineno-3-25></a><span class=w>    </span><span class=p>.</span><span class=n>clk</span><span class=w>                </span><span class=p>(</span><span class=w> </span><span class=n>external_clk</span><span class=w>    </span><span class=p>),</span>
</span><span id=__span-3-26><a id=__codelineno-3-26 name=__codelineno-3-26></a><span class=w>    </span><span class=p>.</span><span class=n>rstn</span><span class=w>               </span><span class=p>(</span><span class=w> </span><span class=n>external_rstn</span><span class=w>   </span><span class=p>),</span>
</span><span id=__span-3-27><a id=__codelineno-3-27 name=__codelineno-3-27></a><span class=w>    </span><span class=p>.</span><span class=n>assic_seg</span><span class=w>          </span><span class=p>(</span><span class=w> </span><span class=n>assic_seg</span><span class=w>       </span><span class=p>),</span>
</span><span id=__span-3-28><a id=__codelineno-3-28 name=__codelineno-3-28></a><span class=w>    </span><span class=p>.</span><span class=n>seg_point</span><span class=w>          </span><span class=p>(</span><span class=w> </span><span class=n>seg_point</span><span class=w>       </span><span class=p>),</span>
</span><span id=__span-3-29><a id=__codelineno-3-29 name=__codelineno-3-29></a><span class=w>    </span><span class=p>.</span><span class=n>led_display_seg</span><span class=w>    </span><span class=p>(</span><span class=w> </span><span class=n>led_display_seg</span><span class=w> </span><span class=p>),</span>
</span><span id=__span-3-30><a id=__codelineno-3-30 name=__codelineno-3-30></a><span class=w>    </span><span class=p>.</span><span class=n>led_display_sel</span><span class=w>    </span><span class=p>(</span><span class=w> </span><span class=n>led_display_sel</span><span class=w> </span><span class=p>)</span>
</span><span id=__span-3-31><a id=__codelineno-3-31 name=__codelineno-3-31></a><span class=p>);</span>
</span><span id=__span-3-32><a id=__codelineno-3-32 name=__codelineno-3-32></a>
</span><span id=__span-3-33><a id=__codelineno-3-33 name=__codelineno-3-33></a><span class=n>matrix_key</span><span class=w> </span><span class=p>#(</span>
</span><span id=__span-3-34><a id=__codelineno-3-34 name=__codelineno-3-34></a><span class=w>    </span><span class=p>.</span><span class=n>ROW_NUM</span><span class=w>        </span><span class=p>(</span><span class=w> </span><span class=mh>4</span><span class=w>     </span><span class=p>),</span>
</span><span id=__span-3-35><a id=__codelineno-3-35 name=__codelineno-3-35></a><span class=w>    </span><span class=p>.</span><span class=n>COL_NUM</span><span class=w>        </span><span class=p>(</span><span class=w> </span><span class=mh>4</span><span class=w>     </span><span class=p>),</span>
</span><span id=__span-3-36><a id=__codelineno-3-36 name=__codelineno-3-36></a><span class=w>    </span><span class=p>.</span><span class=n>DEBOUNCE_TIME</span><span class=w>  </span><span class=p>(</span><span class=w> </span><span class=mh>10000</span><span class=w> </span><span class=p>),</span>
</span><span id=__span-3-37><a id=__codelineno-3-37 name=__codelineno-3-37></a><span class=w>    </span><span class=p>.</span><span class=n>DELAY_TIME</span><span class=w>     </span><span class=p>(</span><span class=w> </span><span class=mh>2000</span><span class=w>  </span><span class=p>))</span>
</span><span id=__span-3-38><a id=__codelineno-3-38 name=__codelineno-3-38></a><span class=n>u_matrix_key</span><span class=p>(</span>
</span><span id=__span-3-39><a id=__codelineno-3-39 name=__codelineno-3-39></a><span class=w>    </span><span class=p>.</span><span class=n>clk</span><span class=w>        </span><span class=p>(</span><span class=w> </span><span class=n>external_clk</span><span class=w>  </span><span class=p>),</span>
</span><span id=__span-3-40><a id=__codelineno-3-40 name=__codelineno-3-40></a><span class=w>    </span><span class=p>.</span><span class=n>rstn</span><span class=w>       </span><span class=p>(</span><span class=w> </span><span class=n>external_rstn</span><span class=w> </span><span class=p>),</span>
</span><span id=__span-3-41><a id=__codelineno-3-41 name=__codelineno-3-41></a><span class=w>    </span><span class=p>.</span><span class=n>row</span><span class=w>        </span><span class=p>(</span><span class=w> </span><span class=n>row</span><span class=w>           </span><span class=p>),</span>
</span><span id=__span-3-42><a id=__codelineno-3-42 name=__codelineno-3-42></a><span class=w>    </span><span class=p>.</span><span class=n>col</span><span class=w>        </span><span class=p>(</span><span class=w> </span><span class=n>col</span><span class=w>           </span><span class=p>),</span>
</span><span id=__span-3-43><a id=__codelineno-3-43 name=__codelineno-3-43></a><span class=w>    </span><span class=p>.</span><span class=n>key_out</span><span class=w>    </span><span class=p>(</span><span class=w> </span><span class=n>key_out</span><span class=w>       </span><span class=p>)</span>
</span><span id=__span-3-44><a id=__codelineno-3-44 name=__codelineno-3-44></a><span class=p>);</span>
</span><span id=__span-3-45><a id=__codelineno-3-45 name=__codelineno-3-45></a>
</span><span id=__span-3-46><a id=__codelineno-3-46 name=__codelineno-3-46></a><span class=n>matrix_key_trigger</span><span class=w> </span><span class=n>u_matrix_key_trigger</span><span class=p>(</span>
</span><span id=__span-3-47><a id=__codelineno-3-47 name=__codelineno-3-47></a><span class=w>    </span><span class=p>.</span><span class=n>clk</span><span class=w>            </span><span class=p>(</span><span class=w> </span><span class=n>external_clk</span><span class=w> </span><span class=p>),</span>
</span><span id=__span-3-48><a id=__codelineno-3-48 name=__codelineno-3-48></a><span class=w>    </span><span class=p>.</span><span class=n>rstn</span><span class=w>           </span><span class=p>(</span><span class=w> </span><span class=n>external_rstn</span><span class=p>),</span>
</span><span id=__span-3-49><a id=__codelineno-3-49 name=__codelineno-3-49></a><span class=w>    </span><span class=p>.</span><span class=n>key</span><span class=w>            </span><span class=p>(</span><span class=w> </span><span class=n>key_out</span><span class=w>      </span><span class=p>),</span>
</span><span id=__span-3-50><a id=__codelineno-3-50 name=__codelineno-3-50></a><span class=w>    </span><span class=p>.</span><span class=n>key_trigger</span><span class=w>    </span><span class=p>(</span><span class=w> </span><span class=n>key_trigger</span><span class=w>  </span><span class=p>)</span>
</span><span id=__span-3-51><a id=__codelineno-3-51 name=__codelineno-3-51></a><span class=p>);</span>
</span><span id=__span-3-52><a id=__codelineno-3-52 name=__codelineno-3-52></a>
</span><span id=__span-3-53><a id=__codelineno-3-53 name=__codelineno-3-53></a><span class=n>password_lock</span><span class=w> </span><span class=n>u_password_lock</span><span class=p>(</span>
</span><span id=__span-3-54><a id=__codelineno-3-54 name=__codelineno-3-54></a><span class=w>    </span><span class=p>.</span><span class=n>clk</span><span class=w>            </span><span class=p>(</span><span class=w> </span><span class=n>external_clk</span><span class=w> </span><span class=p>),</span>
</span><span id=__span-3-55><a id=__codelineno-3-55 name=__codelineno-3-55></a><span class=w>    </span><span class=p>.</span><span class=n>rstn</span><span class=w>           </span><span class=p>(</span><span class=w> </span><span class=n>external_rstn</span><span class=p>),</span>
</span><span id=__span-3-56><a id=__codelineno-3-56 name=__codelineno-3-56></a><span class=w>    </span><span class=p>.</span><span class=n>key_trigger</span><span class=w>    </span><span class=p>(</span><span class=w> </span><span class=n>key_trigger</span><span class=w>  </span><span class=p>),</span>
</span><span id=__span-3-57><a id=__codelineno-3-57 name=__codelineno-3-57></a><span class=w>    </span><span class=p>.</span><span class=n>assic_seg</span><span class=w>      </span><span class=p>(</span><span class=w> </span><span class=n>assic_seg</span><span class=w>    </span><span class=p>),</span>
</span><span id=__span-3-58><a id=__codelineno-3-58 name=__codelineno-3-58></a><span class=w>    </span><span class=p>.</span><span class=n>seg_point</span><span class=w>      </span><span class=p>(</span><span class=w> </span><span class=n>seg_point</span><span class=w>    </span><span class=p>)</span>
</span><span id=__span-3-59><a id=__codelineno-3-59 name=__codelineno-3-59></a><span class=p>);</span>
</span><span id=__span-3-60><a id=__codelineno-3-60 name=__codelineno-3-60></a>
</span><span id=__span-3-61><a id=__codelineno-3-61 name=__codelineno-3-61></a><span class=k>endmodule</span><span class=w> </span><span class=c1>//led_diaplay_top</span>
</span></code></pre></div></td></tr></tbody></table></div> <h3 id=_8>上板验证步骤<a class=headerlink href=#_8 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <hr> <p>可以直接将矩阵键盘，数码管的管脚约束文件中的约束复制到本次实验的管脚约束文件中。</p> <p>将生成的<span class=heti-skip><span class=heti-spacing> </span>sbit<span class=heti-spacing> </span></span>文件烧录好后，即可使用网页界面的虚拟按键进行使用。</p> <h2 id=_9>章末总结<a class=headerlink href=#_9 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h2> <p>本章通过设计一个简易密码锁系统，综合运用了前面基础实验中学习的<strong>矩阵键盘扫描</strong>、<strong>数码管显示</strong>等知识，并引入了<strong>有限状态机（FSM）</strong>的设计方法，完成了一个具有较强工程实用性的综合实验。</p> <p>通过本实验，你应该掌握了以下几点核心能力：</p> <ul> <li>理解并运用 状态机进行系统流程控制；</li> <li>将多个功能模块（键盘、数码管、比较器）整合为一个完整系统；</li> <li>设计基于状态的控制逻辑，实现密码输入、校验、反馈显示等功能；</li> <li>理解数字电路系统中控制与数据路径的分离思想。</li> </ul> <p>密码锁系统虽然逻辑简单，但已经具备了完整嵌入式控制系统的基本结构，是后续更复杂项目设计的重要基础。</p> <h2 id=_10>拓展训练<a class=headerlink href=#_10 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h2> <p>为了进一步加深对本实验内容的理解，并锻炼系统设计与工程实现能力，你可以尝试完成以下拓展任务：</p> <ol> <li><strong>增加防爆破机制</strong>：限定密码错误尝试次数，例如连续三次错误后锁定一段时间，并在数码管上提示“Err”。</li> <li><strong>利用按键实现简易菜单系统</strong>：拓展状态机结构，允许通过矩阵键盘导航菜单，如“输入密码”<heti-adjacent class=heti-adjacent-quarter>、</heti-adjacent>“查看状态”<heti-adjacent class=heti-adjacent-quarter>、</heti-adjacent>“设置新密码”等。</li> </ol> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="January 4, 2026 00:00:16 CST"><span class=timeago datetime=2026-01-04T00:00:16+08:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="January 4, 2026 00:00:16 CST">2026-01-04</span> </span> <span class=md-source-file__fact> <span class=md-icon title=创建日期> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="January 4, 2026 00:00:16 CST"><span class=timeago datetime=2026-01-04T00:00:16+08:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="January 4, 2026 00:00:16 CST">2026-01-04</span> </span> </aside> <h2 id=__comments>评论</h2> <!-- Insert generated snippet here --> <script async crossorigin=anonymous data-category=Announcements data-category-id=DIC_kwDOP3Prz84CwBjS data-emit-metadata=0 data-input-position=top data-lang=zh-CN data-mapping=pathname data-reactions-enabled=1 data-repo=Alivenderwww/Alivenderwww.github.io data-repo-id=R_kgDOP3Przw data-strict=0 data-theme=https://blog.dpp-alivender.life/stylesheets/comments_light.css src=https://giscus.app/client.js>
</script> <!-- Synchronize Giscus theme with palette --> <script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "https://blog.dpp-alivender.life/stylesheets/comments_dark.css"
        : "https://blog.dpp-alivender.life/stylesheets/comments_light.css"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after documented loaded
    // Handled by theme.js now to support dynamic colors
    /*
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "https://blog.dpp-alivender.life/stylesheets/comments_dark.css"
            : "https://blog.dpp-alivender.life/stylesheets/comments_light.css"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
    */
  </script> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button class="md-top md-icon" data-md-component=top hidden type=button> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> 回到页面顶部 </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> </div> <div class=md-social> <a class=md-social__link href=https://github.com/Alivenderwww rel=noopener target=_blank title=github.com> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </a> <a class=md-social__link href=mailto:dppp@mail.dlut.edu.cn rel=noopener target=_blank title> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z"></path></svg> </a> <a class=md-social__link href=/feed_rss_created.xml rel=noopener target=_blank title> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M0 64c0-17.7 14.3-32 32-32 229.8 0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7 0 64m0 352a64 64 0 1 1 128 0 64 64 0 1 1-128 0m32-256c159.1 0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7 0-32-14.3-32-32s14.3-32 32-32"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"annotate": null, "base": "../../..", "features": ["announce.dismiss", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.top", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.indexes", "navigation.tracking", "toc.follow", "search.suggest", "search.highlight", "search.share", "content.tabs.link", "content.tooltips", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.79ae519e.min.js></script> <script src=../../../js/timeago.min.js></script> <script src=../../../js/timeago_mkdocs_material.js></script> <script src=../../../javascripts/pixi_importmap.js></script> <script src=../../../javascripts/extra.js></script> <script src=../../../javascripts/spine_loader.js></script> <script src=https://cdn.jsdelivr.net/gh/Wcowin/Wcowin.github.io@main/docs/javascripts/extra.js></script> <script src=../../../javascripts/theme-switch-animation.js></script> <script src=../../../javascripts/theme.js></script> <script src=../../../javascripts/audio-spectrum.js></script> <script src=../../../javascripts/katex.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/copy-tex.min.js></script> <script src=https://cdn.jsdelivr.net/npm/mermaid@10.0.2/dist/add-html-label-6e56ed67.min.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>